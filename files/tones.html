<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Tones Test</title>
   </head>

    <body>
    <p>Try pressing the keys with audio on! The key mapping is very similar to FL Studio.</p>
    <button onclick="playDDD();">Play Sample</button>
    <p>Unison</p>
    <input type="number" min="1" max="16" id="unison_input" value="8" step="1">
    <p>Detune</p>
    <input type="range" min="0" max="2000" value="200" id="detune_input">
    <p>Blend</p>
    <input type="range" min="0", max="1000" value="500" id="blend_input">
    <p>Waveform</p>
    <input type="radio" id="sine" name="waveform">
    <label for="sine">Sine</label>
    <input type="radio" id="square" name="waveform" checked>
    <label for="square">Square</label>
    <input type="radio" id="sawtooth" name="waveform">
    <label for="sawtooth">Sawtooth</label>
    <input type="radio" id="triangle" name="waveform">
    <label for="triangle">Triangle</label>
    <p>Temperament File (.scl):</p>
    <input type="file" id="scala_file_input" multiple>
    <p>Base Note:</p>
    <input type="text" id="base_note_input" value="A4">
    <p>Base Frequency:</p>
    <input type="number" id="base_frequency_input" value="440">
    <p>Lowpass Filter Value:</p>
    <input type="range" id="lowpass_input" value="1100" min="500" max="1442">
    <p>Attack</p>
    <input type="range" id="attack_input" value="50" min="0" max="500">
    <p>Decay</p>
    <input type="range" id="decay_input" value="400" min="1" max="700">
    <p>Sustain Value</p>
    <input type="range" id="sustain_input" value="20" min="0" max="100">
    <p>Release</p>
    <input type="range" id="release_input" value="55" min="1" max="700">
    <p>Dry</p>
    <input type="range" id="dry_input" value="50" min="0" max="100">
    <p>Wet</p>
    <input type="range" id="wet_input" value="50" min="0" max="100">
    <br>
    </body>
    
    <script>
        !function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e(t.TONES={})}(this,function(h){"use strict";var t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function e(t,e){return t(e={exports:{}},e.exports),e.exports}var Bt=e(function(t){var e=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=e)}),n={}.hasOwnProperty,Wt=function(t,e){return n.call(t,e)},zt=function(t){try{return!!t()}catch(t){return!0}},Kt=!zt(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}),d=e(function(t){var e=t.exports={version:"2.5.7"};"number"==typeof __e&&(__e=e)}),Yt=(d.version,function(t){return"object"==typeof t?null!==t:"function"==typeof t}),p=function(t){if(!Yt(t))throw TypeError(t+" is not an object!");return t},r=Bt.document,i=Yt(r)&&Yt(r.createElement),o=function(t){return i?r.createElement(t):{}},a=!Kt&&!zt(function(){return 7!=Object.defineProperty(o("div"),"a",{get:function(){return 7}}).a}),Ht=function(t,e){if(!Yt(t))return t;var n,r;if(e&&"function"==typeof(n=t.toString)&&!Yt(r=n.call(t)))return r;if("function"==typeof(n=t.valueOf)&&!Yt(r=n.call(t)))return r;if(!e&&"function"==typeof(n=t.toString)&&!Yt(r=n.call(t)))return r;throw TypeError("Can't convert object to primitive value")},u=Object.defineProperty,Jt={f:Kt?Object.defineProperty:function(t,e,n){if(p(t),e=Ht(e,!0),p(n),a)try{return u(t,e,n)}catch(t){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(t[e]=n.value),t}},$t=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}},Zt=Kt?function(t,e,n){return Jt.f(t,e,$t(1,n))}:function(t,e,n){return t[e]=n,t},s=0,c=Math.random(),Qt=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++s+c).toString(36))},w=e(function(t){var o=Qt("src"),e="toString",n=Function[e],a=(""+n).split(e);d.inspectSource=function(t){return n.call(t)},(t.exports=function(t,e,n,r){var i="function"==typeof n;i&&(Wt(n,"name")||Zt(n,"name",e)),t[e]!==n&&(i&&(Wt(n,o)||Zt(n,o,t[e]?""+t[e]:a.join(String(e)))),t===Bt?t[e]=n:r?t[e]?t[e]=n:Zt(t,e,n):(delete t[e],Zt(t,e,n)))})(Function.prototype,e,function(){return"function"==typeof this&&this[o]||n.call(this)})}),l=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t},te=function(r,i,t){if(l(r),void 0===i)return r;switch(t){case 1:return function(t){return r.call(i,t)};case 2:return function(t,e){return r.call(i,t,e)};case 3:return function(t,e,n){return r.call(i,t,e,n)}}return function(){return r.apply(i,arguments)}},y="prototype",g=function(t,e,n){var r,i,o,a,u=t&g.F,s=t&g.G,c=t&g.S,l=t&g.P,f=t&g.B,h=s?Bt:c?Bt[e]||(Bt[e]={}):(Bt[e]||{})[y],v=s?d:d[e]||(d[e]={}),p=v[y]||(v[y]={});for(r in s&&(n=e),n)o=((i=!u&&h&&void 0!==h[r])?h:n)[r],a=f&&i?te(o,Bt):l&&"function"==typeof o?te(Function.call,o):o,h&&w(h,r,o,t&g.U),v[r]!=o&&Zt(v,r,a),l&&p[r]!=o&&(p[r]=o)};Bt.core=d,g.F=1,g.G=2,g.S=4,g.P=8,g.B=16,g.W=32,g.U=64,g.R=128;var ee=g,m=e(function(t){var n=Qt("meta"),e=Jt.f,r=0,i=Object.isExtensible||function(){return!0},o=!zt(function(){return i(Object.preventExtensions({}))}),a=function(t){e(t,n,{value:{i:"O"+ ++r,w:{}}})},u=t.exports={KEY:n,NEED:!1,fastKey:function(t,e){if(!Yt(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!Wt(t,n)){if(!i(t))return"F";if(!e)return"E";a(t)}return t[n].i},getWeak:function(t,e){if(!Wt(t,n)){if(!i(t))return!0;if(!e)return!1;a(t)}return t[n].w},onFreeze:function(t){return o&&u.NEED&&i(t)&&!Wt(t,n)&&a(t),t}}}),f=(m.KEY,m.NEED,m.fastKey,m.getWeak,m.onFreeze,e(function(t){var e="__core-js_shared__",n=Bt[e]||(Bt[e]={});(t.exports=function(t,e){return n[t]||(n[t]=void 0!==e?e:{})})("versions",[]).push({version:d.version,mode:"global",copyright:"© 2018 Denis Pushkarev (zloirock.ru)"})})),ne=e(function(t){var e=f("wks"),n=Bt.Symbol,r="function"==typeof n;(t.exports=function(t){return e[t]||(e[t]=r&&n[t]||(r?n:Qt)("Symbol."+t))}).store=e}),v=Jt.f,b=ne("toStringTag"),q=function(t,e,n){t&&!Wt(t=n?t:t.prototype,b)&&v(t,b,{configurable:!0,value:e})},_={f:ne},x=Jt.f,k=function(t){var e=d.Symbol||(d.Symbol=Bt.Symbol||{});"_"==t.charAt(0)||t in e||x(e,t,{value:_.f(t)})},S={}.toString,T=function(t){return S.call(t).slice(8,-1)},A=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==T(t)?t.split(""):Object(t)},E=function(t){if(null==t)throw TypeError("Can't call method on  "+t);return t},M=function(t){return A(E(t))},O=Math.ceil,P=Math.floor,re=function(t){return isNaN(t=+t)?0:(0<t?P:O)(t)},F=Math.min,ie=function(t){return 0<t?F(re(t),9007199254740991):0},N=Math.max,I=Math.min,oe=function(t,e){return(t=re(t))<0?N(t+e,0):I(t,e)},ae=function(u){return function(t,e,n){var r,i=M(t),o=ie(i.length),a=oe(n,o);if(u&&e!=e){for(;a<o;)if((r=i[a++])!=r)return!0}else for(;a<o;a++)if((u||a in i)&&i[a]===e)return u||a||0;return!u&&-1}},j=f("keys"),C=function(t){return j[t]||(j[t]=Qt(t))},V=ae(!1),R=C("IE_PROTO"),L=function(t,e){var n,r=M(t),i=0,o=[];for(n in r)n!=R&&Wt(r,n)&&o.push(n);for(;e.length>i;)Wt(r,n=e[i++])&&(~V(o,n)||o.push(n));return o},D="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(","),G=Object.keys||function(t){return L(t,D)},U={f:Object.getOwnPropertySymbols},X={f:{}.propertyIsEnumerable},B=Array.isArray||function(t){return"Array"==T(t)},W=Kt?Object.defineProperties:function(t,e){p(t);for(var n,r=G(e),i=r.length,o=0;o<i;)Jt.f(t,n=r[o++],e[n]);return t},z=Bt.document,K=z&&z.documentElement,Y=C("IE_PROTO"),H=function(){},J="prototype",$=function(){var t,e=o("iframe"),n=D.length;for(e.style.display="none",K.appendChild(e),e.src="javascript:",(t=e.contentWindow.document).open(),t.write("<script>document.F=Object<\/script>"),t.close(),$=t.F;n--;)delete $[J][D[n]];return $()},ue=Object.create||function(t,e){var n;return null!==t?(H[J]=p(t),n=new H,H[J]=null,n[Y]=t):n=$(),void 0===e?n:W(n,e)},Z=D.concat("length","prototype"),se={f:Object.getOwnPropertyNames||function(t){return L(t,Z)}},Q=se.f,tt={}.toString,et="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],nt={f:function(t){return et&&"[object Window]"==tt.call(t)?function(t){try{return Q(t)}catch(t){return et.slice()}}(t):Q(M(t))}},rt=Object.getOwnPropertyDescriptor,ce={f:Kt?rt:function(t,e){if(t=M(t),e=Ht(e,!0),a)try{return rt(t,e)}catch(t){}if(Wt(t,e))return $t(!X.f.call(t,e),t[e])}},it=m.KEY,ot=ce.f,at=Jt.f,ut=nt.f,st=Bt.Symbol,ct=Bt.JSON,lt=ct&&ct.stringify,ft="prototype",ht=ne("_hidden"),vt=ne("toPrimitive"),pt={}.propertyIsEnumerable,dt=f("symbol-registry"),yt=f("symbols"),gt=f("op-symbols"),mt=Object[ft],wt="function"==typeof st,bt=Bt.QObject,_t=!bt||!bt[ft]||!bt[ft].findChild,xt=Kt&&zt(function(){return 7!=ue(at({},"a",{get:function(){return at(this,"a",{value:7}).a}})).a})?function(t,e,n){var r=ot(mt,e);r&&delete mt[e],at(t,e,n),r&&t!==mt&&at(mt,e,r)}:at,kt=function(t){var e=yt[t]=ue(st[ft]);return e._k=t,e},St=wt&&"symbol"==typeof st.iterator?function(t){return"symbol"==typeof t}:function(t){return t instanceof st},Tt=function(t,e,n){return t===mt&&Tt(gt,e,n),p(t),e=Ht(e,!0),p(n),Wt(yt,e)?(n.enumerable?(Wt(t,ht)&&t[ht][e]&&(t[ht][e]=!1),n=ue(n,{enumerable:$t(0,!1)})):(Wt(t,ht)||at(t,ht,$t(1,{})),t[ht][e]=!0),xt(t,e,n)):at(t,e,n)},At=function(t,e){p(t);for(var n,r=function(t){var e=G(t),n=U.f;if(n)for(var r,i=n(t),o=X.f,a=0;i.length>a;)o.call(t,r=i[a++])&&e.push(r);return e}(e=M(e)),i=0,o=r.length;i<o;)Tt(t,n=r[i++],e[n]);return t},Et=function(t){var e=pt.call(this,t=Ht(t,!0));return!(this===mt&&Wt(yt,t)&&!Wt(gt,t))&&(!(e||!Wt(this,t)||!Wt(yt,t)||Wt(this,ht)&&this[ht][t])||e)},Mt=function(t,e){if(t=M(t),e=Ht(e,!0),t!==mt||!Wt(yt,e)||Wt(gt,e)){var n=ot(t,e);return!n||!Wt(yt,e)||Wt(t,ht)&&t[ht][e]||(n.enumerable=!0),n}},Ot=function(t){for(var e,n=ut(M(t)),r=[],i=0;n.length>i;)Wt(yt,e=n[i++])||e==ht||e==it||r.push(e);return r},Pt=function(t){for(var e,n=t===mt,r=ut(n?gt:M(t)),i=[],o=0;r.length>o;)!Wt(yt,e=r[o++])||n&&!Wt(mt,e)||i.push(yt[e]);return i};wt||(w((st=function(){if(this instanceof st)throw TypeError("Symbol is not a constructor!");var e=Qt(0<arguments.length?arguments[0]:void 0),n=function(t){this===mt&&n.call(gt,t),Wt(this,ht)&&Wt(this[ht],e)&&(this[ht][e]=!1),xt(this,e,$t(1,t))};return Kt&&_t&&xt(mt,e,{configurable:!0,set:n}),kt(e)})[ft],"toString",function(){return this._k}),ce.f=Mt,Jt.f=Tt,se.f=nt.f=Ot,X.f=Et,U.f=Pt,Kt&&w(mt,"propertyIsEnumerable",Et,!0),_.f=function(t){return kt(ne(t))}),ee(ee.G+ee.W+ee.F*!wt,{Symbol:st});for(var Ft="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),Nt=0;Ft.length>Nt;)ne(Ft[Nt++]);for(var It=G(ne.store),jt=0;It.length>jt;)k(It[jt++]);ee(ee.S+ee.F*!wt,"Symbol",{for:function(t){return Wt(dt,t+="")?dt[t]:dt[t]=st(t)},keyFor:function(t){if(!St(t))throw TypeError(t+" is not a symbol!");for(var e in dt)if(dt[e]===t)return e},useSetter:function(){_t=!0},useSimple:function(){_t=!1}}),ee(ee.S+ee.F*!wt,"Object",{create:function(t,e){return void 0===e?ue(t):At(ue(t),e)},defineProperty:Tt,defineProperties:At,getOwnPropertyDescriptor:Mt,getOwnPropertyNames:Ot,getOwnPropertySymbols:Pt}),ct&&ee(ee.S+ee.F*(!wt||zt(function(){var t=st();return"[null]"!=lt([t])||"{}"!=lt({a:t})||"{}"!=lt(Object(t))})),"JSON",{stringify:function(t){for(var e,n,r=[t],i=1;arguments.length>i;)r.push(arguments[i++]);if(n=e=r[1],(Yt(e)||void 0!==t)&&!St(t))return B(e)||(e=function(t,e){if("function"==typeof n&&(e=n.call(this,t,e)),!St(e))return e}),r[1]=e,lt.apply(ct,r)}}),st[ft][vt]||Zt(st[ft],vt,st[ft].valueOf),q(st,"Symbol"),q(Math,"Math",!0),q(Bt.JSON,"JSON",!0),ee(ee.S,"Object",{create:ue}),ee(ee.S+ee.F*!Kt,"Object",{defineProperty:Jt.f}),ee(ee.S+ee.F*!Kt,"Object",{defineProperties:W});var Ct=function(t,e){var n=(d.Object||{})[t]||Object[t],r={};r[t]=e(n),ee(ee.S+ee.F*zt(function(){n(1)}),"Object",r)},Vt=ce.f;Ct("getOwnPropertyDescriptor",function(){return function(t,e){return Vt(M(t),e)}});var le=function(t){return Object(E(t))},Rt=C("IE_PROTO"),Lt=Object.prototype,fe=Object.getPrototypeOf||function(t){return t=le(t),Wt(t,Rt)?t[Rt]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?Lt:null};Ct("getPrototypeOf",function(){return function(t){return fe(le(t))}}),Ct("keys",function(){return function(t){return G(le(t))}}),Ct("getOwnPropertyNames",function(){return nt.f});var Dt=m.onFreeze;Ct("freeze",function(e){return function(t){return e&&Yt(t)?e(Dt(t)):t}});var Gt=m.onFreeze;Ct("seal",function(e){return function(t){return e&&Yt(t)?e(Gt(t)):t}});var qt=m.onFreeze;Ct("preventExtensions",function(e){return function(t){return e&&Yt(t)?e(qt(t)):t}}),Ct("isFrozen",function(e){return function(t){return!Yt(t)||!!e&&e(t)}}),Ct("isSealed",function(e){return function(t){return!Yt(t)||!!e&&e(t)}}),Ct("isExtensible",function(e){return function(t){return!!Yt(t)&&(!e||e(t))}});var Ut=Object.assign,Xt=!Ut||zt(function(){var t={},e={},n=Symbol(),r="abcdefghijklmnopqrst";return t[n]=7,r.split("").forEach(function(t){e[t]=t}),7!=Ut({},t)[n]||Object.keys(Ut({},e)).join("")!=r})?function(t,e){for(var n=le(t),r=arguments.length,i=1,o=U.f,a=X.f;i<r;)for(var u,s=A(arguments[i++]),c=o?G(s).concat(o(s)):G(s),l=c.length,f=0;f<l;)a.call(s,u=c[f++])&&(n[u]=s[u]);return n}:Ut;ee(ee.S+ee.F,"Object",{assign:Xt});var he=Object.is||function(t,e){return t===e?0!==t||1/t==1/e:t!=t&&e!=e};ee(ee.S,"Object",{is:he});var ve=function(t,e){if(p(t),!Yt(e)&&null!==e)throw TypeError(e+": can't set as prototype!")},pe={set:Object.setPrototypeOf||("__proto__"in{}?function(t,n,r){try{(r=te(Function.call,ce.f(Object.prototype,"__proto__").set,2))(t,[]),n=!(t instanceof Array)}catch(t){n=!0}return function(t,e){return ve(t,e),n?t.__proto__=e:r(t,e),t}}({},!1):void 0),check:ve};ee(ee.S,"Object",{setPrototypeOf:pe.set});var de=ne("toStringTag"),ye="Arguments"==T(function(){return arguments}()),ge=function(t){var e,n,r;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=function(t,e){try{return t[e]}catch(t){}}(e=Object(t),de))?n:ye?T(e):"Object"==(r=T(e))&&"function"==typeof e.callee?"Arguments":r},me={};me[ne("toStringTag")]="z",me+""!="[object z]"&&w(Object.prototype,"toString",function(){return"[object "+ge(this)+"]"},!0);var we=function(t,e,n){var r=void 0===n;switch(e.length){case 0:return r?t():t.call(n);case 1:return r?t(e[0]):t.call(n,e[0]);case 2:return r?t(e[0],e[1]):t.call(n,e[0],e[1]);case 3:return r?t(e[0],e[1],e[2]):t.call(n,e[0],e[1],e[2]);case 4:return r?t(e[0],e[1],e[2],e[3]):t.call(n,e[0],e[1],e[2],e[3])}return t.apply(n,e)},be=[].slice,_e={},xe=Function.bind||function(e){var n=l(this),r=be.call(arguments,1),i=function(){var t=r.concat(be.call(arguments));return this instanceof i?function(t,e,n){if(!(e in _e)){for(var r=[],i=0;i<e;i++)r[i]="a["+i+"]";_e[e]=Function("F,a","return new F("+r.join(",")+")")}return _e[e](t,n)}(n,t.length,t):we(n,t,e)};return Yt(n.prototype)&&(i.prototype=n.prototype),i};ee(ee.P,"Function",{bind:xe});var ke=Jt.f,Se=Function.prototype,Te=/^\s*function ([^ (]*)/;"name"in Se||Kt&&ke(Se,"name",{configurable:!0,get:function(){try{return(""+this).match(Te)[1]}catch(t){return""}}});var Ae=ne("hasInstance"),Ee=Function.prototype;Ae in Ee||Jt.f(Ee,Ae,{value:function(t){if("function"!=typeof this||!Yt(t))return!1;if(!Yt(this.prototype))return t instanceof this;for(;t=fe(t);)if(this.prototype===t)return!0;return!1}});var Me="\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff",Oe="["+Me+"]",Pe=RegExp("^"+Oe+Oe+"*"),Fe=RegExp(Oe+Oe+"*$"),Ne=function(t,e,n){var r={},i=zt(function(){return!!Me[t]()||"​"!="​"[t]()}),o=r[t]=i?e(Ie):Me[t];n&&(r[n]=o),ee(ee.P+ee.F*i,"String",r)},Ie=Ne.trim=function(t,e){return t=String(E(t)),1&e&&(t=t.replace(Pe,"")),2&e&&(t=t.replace(Fe,"")),t},je=Ne,Ce=Bt.parseInt,Ve=je.trim,Re=/^[-+]?0[xX]/,Le=8!==Ce(Me+"08")||22!==Ce(Me+"0x16")?function(t,e){var n=Ve(String(t),3);return Ce(n,e>>>0||(Re.test(n)?16:10))}:Ce;ee(ee.G+ee.F*(parseInt!=Le),{parseInt:Le});var De=Bt.parseFloat,Ge=je.trim,qe=1/De(Me+"-0")!=-1/0?function(t){var e=Ge(String(t),3),n=De(e);return 0===n&&"-"==e.charAt(0)?-0:n}:De;ee(ee.G+ee.F*(parseFloat!=qe),{parseFloat:qe});var Ue=pe.set,Xe=function(t,e,n){var r,i=e.constructor;return i!==n&&"function"==typeof i&&(r=i.prototype)!==n.prototype&&Yt(r)&&Ue&&Ue(t,r),t},Be=se.f,We=ce.f,ze=Jt.f,Ke=je.trim,Ye="Number",He=Bt[Ye],Je=He,$e=He.prototype,Ze=T(ue($e))==Ye,Qe="trim"in String.prototype,tn=function(t){var e=Ht(t,!1);if("string"==typeof e&&2<e.length){var n,r,i,o=(e=Qe?e.trim():Ke(e,3)).charCodeAt(0);if(43===o||45===o){if(88===(n=e.charCodeAt(2))||120===n)return NaN}else if(48===o){switch(e.charCodeAt(1)){case 66:case 98:r=2,i=49;break;case 79:case 111:r=8,i=55;break;default:return+e}for(var a,u=e.slice(2),s=0,c=u.length;s<c;s++)if((a=u.charCodeAt(s))<48||i<a)return NaN;return parseInt(u,r)}}return+e};if(!He(" 0o1")||!He("0b1")||He("+0x1")){He=function(t){var e=arguments.length<1?0:t,n=this;return n instanceof He&&(Ze?zt(function(){$e.valueOf.call(n)}):T(n)!=Ye)?Xe(new Je(tn(e)),n,He):tn(e)};for(var en,nn=Kt?Be(Je):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),rn=0;nn.length>rn;rn++)Wt(Je,en=nn[rn])&&!Wt(He,en)&&ze(He,en,We(Je,en));(He.prototype=$e).constructor=He,w(Bt,Ye,He)}var on=function(t,e){if("number"!=typeof t&&"Number"!=T(t))throw TypeError(e);return+t},an=function(t){var e=String(E(this)),n="",r=re(t);if(r<0||r==1/0)throw RangeError("Count can't be negative");for(;0<r;(r>>>=1)&&(e+=e))1&r&&(n+=e);return n},un=1..toFixed,sn=Math.floor,cn=[0,0,0,0,0,0],ln="Number.toFixed: incorrect invocation!",fn=function(t,e){for(var n=-1,r=e;++n<6;)r+=t*cn[n],cn[n]=r%1e7,r=sn(r/1e7)},hn=function(t){for(var e=6,n=0;0<=--e;)n+=cn[e],cn[e]=sn(n/t),n=n%t*1e7},vn=function(){for(var t=6,e="";0<=--t;)if(""!==e||0===t||0!==cn[t]){var n=String(cn[t]);e=""===e?n:e+an.call("0",7-n.length)+n}return e},pn=function(t,e,n){return 0===e?n:e%2==1?pn(t,e-1,n*t):pn(t*t,e/2,n)};ee(ee.P+ee.F*(!!un&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==(0xde0b6b3a7640080).toFixed(0))||!zt(function(){un.call({})})),"Number",{toFixed:function(t){var e,n,r,i,o=on(this,ln),a=re(t),u="",s="0";if(a<0||20<a)throw RangeError(ln);if(o!=o)return"NaN";if(o<=-1e21||1e21<=o)return String(o);if(o<0&&(u="-",o=-o),1e-21<o)if(n=(e=function(t){for(var e=0,n=t;4096<=n;)e+=12,n/=4096;for(;2<=n;)e+=1,n/=2;return e}(o*pn(2,69,1))-69)<0?o*pn(2,-e,1):o/pn(2,e,1),n*=4503599627370496,0<(e=52-e)){for(fn(0,n),r=a;7<=r;)fn(1e7,0),r-=7;for(fn(pn(10,r,1),0),r=e-1;23<=r;)hn(1<<23),r-=23;hn(1<<r),fn(1,1),hn(2),s=vn()}else fn(0,n),fn(1<<-e,0),s=vn()+an.call("0",a);return s=0<a?u+((i=s.length)<=a?"0."+an.call("0",a-i)+s:s.slice(0,i-a)+"."+s.slice(i-a)):u+s}});var dn=1..toPrecision;ee(ee.P+ee.F*(zt(function(){return"1"!==dn.call(1,void 0)})||!zt(function(){dn.call({})})),"Number",{toPrecision:function(t){var e=on(this,"Number#toPrecision: incorrect invocation!");return void 0===t?dn.call(e):dn.call(e,t)}}),ee(ee.S,"Number",{EPSILON:Math.pow(2,-52)});var yn=Bt.isFinite;ee(ee.S,"Number",{isFinite:function(t){return"number"==typeof t&&yn(t)}});var gn=Math.floor,mn=function(t){return!Yt(t)&&isFinite(t)&&gn(t)===t};ee(ee.S,"Number",{isInteger:mn}),ee(ee.S,"Number",{isNaN:function(t){return t!=t}});var wn=Math.abs;ee(ee.S,"Number",{isSafeInteger:function(t){return mn(t)&&wn(t)<=9007199254740991}}),ee(ee.S,"Number",{MAX_SAFE_INTEGER:9007199254740991}),ee(ee.S,"Number",{MIN_SAFE_INTEGER:-9007199254740991}),ee(ee.S+ee.F*(Number.parseFloat!=qe),"Number",{parseFloat:qe}),ee(ee.S+ee.F*(Number.parseInt!=Le),"Number",{parseInt:Le});var bn=Math.log1p||function(t){return-1e-8<(t=+t)&&t<1e-8?t-t*t/2:Math.log(1+t)},_n=Math.sqrt,xn=Math.acosh;ee(ee.S+ee.F*!(xn&&710==Math.floor(xn(Number.MAX_VALUE))&&xn(1/0)==1/0),"Math",{acosh:function(t){return(t=+t)<1?NaN:94906265.62425156<t?Math.log(t)+Math.LN2:bn(t-1+_n(t-1)*_n(t+1))}});var kn=Math.asinh;ee(ee.S+ee.F*!(kn&&0<1/kn(0)),"Math",{asinh:function t(e){return isFinite(e=+e)&&0!=e?e<0?-t(-e):Math.log(e+Math.sqrt(e*e+1)):e}});var Sn=Math.atanh;ee(ee.S+ee.F*!(Sn&&1/Sn(-0)<0),"Math",{atanh:function(t){return 0==(t=+t)?t:Math.log((1+t)/(1-t))/2}});var Tn=Math.sign||function(t){return 0==(t=+t)||t!=t?t:t<0?-1:1};ee(ee.S,"Math",{cbrt:function(t){return Tn(t=+t)*Math.pow(Math.abs(t),1/3)}}),ee(ee.S,"Math",{clz32:function(t){return(t>>>=0)?31-Math.floor(Math.log(t+.5)*Math.LOG2E):32}});var An=Math.exp;ee(ee.S,"Math",{cosh:function(t){return(An(t=+t)+An(-t))/2}});var En=Math.expm1,Mn=!En||22025.465794806718<En(10)||En(10)<22025.465794806718||-2e-17!=En(-2e-17)?function(t){return 0==(t=+t)?t:-1e-6<t&&t<1e-6?t+t*t/2:Math.exp(t)-1}:En;ee(ee.S+ee.F*(Mn!=Math.expm1),"Math",{expm1:Mn});var On=Math.pow,Pn=On(2,-52),Fn=On(2,-23),Nn=On(2,127)*(2-Fn),In=On(2,-126),jn=Math.fround||function(t){var e,n,r=Math.abs(t),i=Tn(t);return r<In?i*(r/In/Fn+1/Pn-1/Pn)*In*Fn:Nn<(n=(e=(1+Fn/Pn)*r)-(e-r))||n!=n?i*(1/0):i*n};ee(ee.S,"Math",{fround:jn});var Cn=Math.abs;ee(ee.S,"Math",{hypot:function(t,e){for(var n,r,i=0,o=0,a=arguments.length,u=0;o<a;)u<(n=Cn(arguments[o++]))?(i=i*(r=u/n)*r+1,u=n):i+=0<n?(r=n/u)*r:n;return u===1/0?1/0:u*Math.sqrt(i)}});var Vn=Math.imul;ee(ee.S+ee.F*zt(function(){return-5!=Vn(4294967295,5)||2!=Vn.length}),"Math",{imul:function(t,e){var n=65535,r=+t,i=+e,o=n&r,a=n&i;return 0|o*a+((n&r>>>16)*a+o*(n&i>>>16)<<16>>>0)}}),ee(ee.S,"Math",{log10:function(t){return Math.log(t)*Math.LOG10E}}),ee(ee.S,"Math",{log1p:bn}),ee(ee.S,"Math",{log2:function(t){return Math.log(t)/Math.LN2}}),ee(ee.S,"Math",{sign:Tn});var Rn=Math.exp;ee(ee.S+ee.F*zt(function(){return-2e-17!=!Math.sinh(-2e-17)}),"Math",{sinh:function(t){return Math.abs(t=+t)<1?(Mn(t)-Mn(-t))/2:(Rn(t-1)-Rn(-t-1))*(Math.E/2)}});var Ln=Math.exp;ee(ee.S,"Math",{tanh:function(t){var e=Mn(t=+t),n=Mn(-t);return e==1/0?1:n==1/0?-1:(e-n)/(Ln(t)+Ln(-t))}}),ee(ee.S,"Math",{trunc:function(t){return(0<t?Math.floor:Math.ceil)(t)}});var Dn=String.fromCharCode,Gn=String.fromCodePoint;ee(ee.S+ee.F*(!!Gn&&1!=Gn.length),"String",{fromCodePoint:function(t){for(var e,n=[],r=arguments.length,i=0;i<r;){if(e=+arguments[i++],oe(e,1114111)!==e)throw RangeError(e+" is not a valid code point");n.push(e<65536?Dn(e):Dn(55296+((e-=65536)>>10),e%1024+56320))}return n.join("")}}),ee(ee.S,"String",{raw:function(t){for(var e=M(t.raw),n=ie(e.length),r=arguments.length,i=[],o=0;o<n;)i.push(String(e[o++])),o<r&&i.push(String(arguments[o]));return i.join("")}}),je("trim",function(t){return function(){return t(this,3)}});var qn=function(u){return function(t,e){var n,r,i=String(E(t)),o=re(e),a=i.length;return o<0||a<=o?u?"":void 0:(n=i.charCodeAt(o))<55296||56319<n||o+1===a||(r=i.charCodeAt(o+1))<56320||57343<r?u?i.charAt(o):n:u?i.slice(o,o+2):r-56320+(n-55296<<10)+65536}},Un={},Xn={};Zt(Xn,ne("iterator"),function(){return this});var Bn=function(t,e,n){t.prototype=ue(Xn,{next:$t(1,n)}),q(t,e+" Iterator")},Wn=ne("iterator"),zn=!([].keys&&"next"in[].keys()),Kn="values",Yn=function(){return this},Hn=function(t,e,n,r,i,o,a){Bn(n,e,r);var u,s,c,l=function(t){if(!zn&&t in p)return p[t];switch(t){case"keys":case Kn:return function(){return new n(this,t)}}return function(){return new n(this,t)}},f=e+" Iterator",h=i==Kn,v=!1,p=t.prototype,d=p[Wn]||p["@@iterator"]||i&&p[i],y=d||l(i),g=i?h?l("entries"):y:void 0,m="Array"==e&&p.entries||d;if(m&&(c=fe(m.call(new t)))!==Object.prototype&&c.next&&(q(c,f,!0),"function"!=typeof c[Wn]&&Zt(c,Wn,Yn)),h&&d&&d.name!==Kn&&(v=!0,y=function(){return d.call(this)}),(zn||v||!p[Wn])&&Zt(p,Wn,y),Un[e]=y,Un[f]=Yn,i)if(u={values:h?y:l(Kn),keys:o?y:l("keys"),entries:g},a)for(s in u)s in p||w(p,s,u[s]);else ee(ee.P+ee.F*(zn||v),e,u);return u},Jn=qn(!0);Hn(String,"String",function(t){this._t=String(t),this._i=0},function(){var t,e=this._t,n=this._i;return n>=e.length?{value:void 0,done:!0}:(t=Jn(e,n),this._i+=t.length,{value:t,done:!1})});var $n=qn(!1);ee(ee.P,"String",{codePointAt:function(t){return $n(this,t)}});var Zn=ne("match"),Qn=function(t){var e;return Yt(t)&&(void 0!==(e=t[Zn])?!!e:"RegExp"==T(t))},tr=function(t,e,n){if(Qn(e))throw TypeError("String#"+n+" doesn't accept regex!");return String(E(t))},er=ne("match"),nr=function(e){var n=/./;try{"/./"[e](n)}catch(t){try{return n[er]=!1,!"/./"[e](n)}catch(t){}}return!0},rr="endsWith",ir=""[rr];ee(ee.P+ee.F*nr(rr),"String",{endsWith:function(t){var e=tr(this,t,rr),n=1<arguments.length?arguments[1]:void 0,r=ie(e.length),i=void 0===n?r:Math.min(ie(n),r),o=String(t);return ir?ir.call(e,o,i):e.slice(i-o.length,i)===o}});var or="includes";ee(ee.P+ee.F*nr(or),"String",{includes:function(t){return!!~tr(this,t,or).indexOf(t,1<arguments.length?arguments[1]:void 0)}}),ee(ee.P,"String",{repeat:an});var ar="startsWith",ur=""[ar];ee(ee.P+ee.F*nr(ar),"String",{startsWith:function(t){var e=tr(this,t,ar),n=ie(Math.min(1<arguments.length?arguments[1]:void 0,e.length)),r=String(t);return ur?ur.call(e,r,n):e.slice(n,n+r.length)===r}});var sr=/"/g,cr=function(t,e,n,r){var i=String(E(t)),o="<"+e;return""!==n&&(o+=" "+n+'="'+String(r).replace(sr,"&quot;")+'"'),o+">"+i+"</"+e+">"},lr=function(e,t){var n={};n[e]=t(cr),ee(ee.P+ee.F*zt(function(){var t=""[e]('"');return t!==t.toLowerCase()||3<t.split('"').length}),"String",n)};lr("anchor",function(e){return function(t){return e(this,"a","name",t)}}),lr("big",function(t){return function(){return t(this,"big","","")}}),lr("blink",function(t){return function(){return t(this,"blink","","")}}),lr("bold",function(t){return function(){return t(this,"b","","")}}),lr("fixed",function(t){return function(){return t(this,"tt","","")}}),lr("fontcolor",function(e){return function(t){return e(this,"font","color",t)}}),lr("fontsize",function(e){return function(t){return e(this,"font","size",t)}}),lr("italics",function(t){return function(){return t(this,"i","","")}}),lr("link",function(e){return function(t){return e(this,"a","href",t)}}),lr("small",function(t){return function(){return t(this,"small","","")}}),lr("strike",function(t){return function(){return t(this,"strike","","")}}),lr("sub",function(t){return function(){return t(this,"sub","","")}}),lr("sup",function(t){return function(){return t(this,"sup","","")}}),ee(ee.S,"Date",{now:function(){return(new Date).getTime()}}),ee(ee.P+ee.F*zt(function(){return null!==new Date(NaN).toJSON()||1!==Date.prototype.toJSON.call({toISOString:function(){return 1}})}),"Date",{toJSON:function(t){var e=le(this),n=Ht(e);return"number"!=typeof n||isFinite(n)?e.toISOString():null}});var fr=Date.prototype.getTime,hr=Date.prototype.toISOString,vr=function(t){return 9<t?t:"0"+t},pr=zt(function(){return"0385-07-25T07:06:39.999Z"!=hr.call(new Date(-5e13-1))})||!zt(function(){hr.call(new Date(NaN))})?function(){if(!isFinite(fr.call(this)))throw RangeError("Invalid time value");var t=this,e=t.getUTCFullYear(),n=t.getUTCMilliseconds(),r=e<0?"-":9999<e?"+":"";return r+("00000"+Math.abs(e)).slice(r?-6:-4)+"-"+vr(t.getUTCMonth()+1)+"-"+vr(t.getUTCDate())+"T"+vr(t.getUTCHours())+":"+vr(t.getUTCMinutes())+":"+vr(t.getUTCSeconds())+"."+(99<n?n:"0"+vr(n))+"Z"}:hr;ee(ee.P+ee.F*(Date.prototype.toISOString!==pr),"Date",{toISOString:pr});var dr=Date.prototype,yr="Invalid Date",gr="toString",mr=dr[gr],wr=dr.getTime;new Date(NaN)+""!=yr&&w(dr,gr,function(){var t=wr.call(this);return t==t?mr.call(this):yr});var br=ne("toPrimitive"),_r=Date.prototype;br in _r||Zt(_r,br,function(t){if("string"!==t&&"number"!==t&&"default"!==t)throw TypeError("Incorrect hint");return Ht(p(this),"number"!=t)}),ee(ee.S,"Array",{isArray:B});var xr=function(e,t,n,r){try{return r?t(p(n)[0],n[1]):t(n)}catch(t){var i=e.return;throw void 0!==i&&p(i.call(e)),t}},kr=ne("iterator"),Sr=Array.prototype,Tr=function(t){return void 0!==t&&(Un.Array===t||Sr[kr]===t)},Ar=function(t,e,n){e in t?Jt.f(t,e,$t(0,n)):t[e]=n},Er=ne("iterator"),Mr=d.getIteratorMethod=function(t){if(null!=t)return t[Er]||t["@@iterator"]||Un[ge(t)]},Or=ne("iterator"),Pr=!1;try{[7][Or]().return=function(){Pr=!0}}catch(t){}var Fr=function(t,e){if(!e&&!Pr)return!1;var n=!1;try{var r=[7],i=r[Or]();i.next=function(){return{done:n=!0}},r[Or]=function(){return i},t(r)}catch(t){}return n};ee(ee.S+ee.F*!Fr(function(t){}),"Array",{from:function(t){var e,n,r,i,o=le(t),a="function"==typeof this?this:Array,u=arguments.length,s=1<u?arguments[1]:void 0,c=void 0!==s,l=0,f=Mr(o);if(c&&(s=te(s,2<u?arguments[2]:void 0,2)),null==f||a==Array&&Tr(f))for(n=new a(e=ie(o.length));l<e;l++)Ar(n,l,c?s(o[l],l):o[l]);else for(i=f.call(o),n=new a;!(r=i.next()).done;l++)Ar(n,l,c?xr(i,s,[r.value,l],!0):r.value);return n.length=l,n}}),ee(ee.S+ee.F*zt(function(){function t(){}return!(Array.of.call(t)instanceof t)}),"Array",{of:function(){for(var t=0,e=arguments.length,n=new("function"==typeof this?this:Array)(e);t<e;)Ar(n,t,arguments[t++]);return n.length=e,n}});var Nr=function(t,e){return!!t&&zt(function(){e?t.call(null,function(){},1):t.call(null)})},Ir=[].join;ee(ee.P+ee.F*(A!=Object||!Nr(Ir)),"Array",{join:function(t){return Ir.call(M(this),void 0===t?",":t)}});var jr=[].slice;ee(ee.P+ee.F*zt(function(){K&&jr.call(K)}),"Array",{slice:function(t,e){var n=ie(this.length),r=T(this);if(e=void 0===e?n:e,"Array"==r)return jr.call(this,t,e);for(var i=oe(t,n),o=oe(e,n),a=ie(o-i),u=new Array(a),s=0;s<a;s++)u[s]="String"==r?this.charAt(i+s):this[i+s];return u}});var Cr=[].sort,Vr=[1,2,3];ee(ee.P+ee.F*(zt(function(){Vr.sort(void 0)})||!zt(function(){Vr.sort(null)})||!Nr(Cr)),"Array",{sort:function(t){return void 0===t?Cr.call(le(this)):Cr.call(le(this),l(t))}});var Rr=ne("species"),Lr=function(t,e){return B(n=t)&&("function"!=typeof(r=n.constructor)||r!==Array&&!B(r.prototype)||(r=void 0),Yt(r)&&null===(r=r[Rr])&&(r=void 0)),new(void 0===r?Array:r)(e);var n,r},Dr=function(f,t){var h=1==f,v=2==f,p=3==f,d=4==f,y=6==f,g=5==f||y,m=t||Lr;return function(t,e,n){for(var r,i,o=le(t),a=A(o),u=te(e,n,3),s=ie(a.length),c=0,l=h?m(t,s):v?m(t,0):void 0;c<s;c++)if((g||c in a)&&(i=u(r=a[c],c,o),f))if(h)l[c]=i;else if(i)switch(f){case 3:return!0;case 5:return r;case 6:return c;case 2:l.push(r)}else if(d)return!1;return y?-1:p||d?d:l}},Gr=Dr(0),qr=Nr([].forEach,!0);ee(ee.P+ee.F*!qr,"Array",{forEach:function(t){return Gr(this,t,arguments[1])}});var Ur=Dr(1);ee(ee.P+ee.F*!Nr([].map,!0),"Array",{map:function(t){return Ur(this,t,arguments[1])}});var Xr=Dr(2);ee(ee.P+ee.F*!Nr([].filter,!0),"Array",{filter:function(t){return Xr(this,t,arguments[1])}});var Br=Dr(3);ee(ee.P+ee.F*!Nr([].some,!0),"Array",{some:function(t){return Br(this,t,arguments[1])}});var Wr=Dr(4);ee(ee.P+ee.F*!Nr([].every,!0),"Array",{every:function(t){return Wr(this,t,arguments[1])}});var zr=function(t,e,n,r,i){l(e);var o=le(t),a=A(o),u=ie(o.length),s=i?u-1:0,c=i?-1:1;if(n<2)for(;;){if(s in a){r=a[s],s+=c;break}if(s+=c,i?s<0:u<=s)throw TypeError("Reduce of empty array with no initial value")}for(;i?0<=s:s<u;s+=c)s in a&&(r=e(r,a[s],s,o));return r};ee(ee.P+ee.F*!Nr([].reduce,!0),"Array",{reduce:function(t){return zr(this,t,arguments.length,arguments[1],!1)}}),ee(ee.P+ee.F*!Nr([].reduceRight,!0),"Array",{reduceRight:function(t){return zr(this,t,arguments.length,arguments[1],!0)}});var Kr=ae(!1),Yr=[].indexOf,Hr=!!Yr&&1/[1].indexOf(1,-0)<0;ee(ee.P+ee.F*(Hr||!Nr(Yr)),"Array",{indexOf:function(t){return Hr?Yr.apply(this,arguments)||0:Kr(this,t,arguments[1])}});var Jr=[].lastIndexOf,$r=!!Jr&&1/[1].lastIndexOf(1,-0)<0;ee(ee.P+ee.F*($r||!Nr(Jr)),"Array",{lastIndexOf:function(t){if($r)return Jr.apply(this,arguments)||0;var e=M(this),n=ie(e.length),r=n-1;for(1<arguments.length&&(r=Math.min(r,re(arguments[1]))),r<0&&(r=n+r);0<=r;r--)if(r in e&&e[r]===t)return r||0;return-1}});var Zr=[].copyWithin||function(t,e){var n=le(this),r=ie(n.length),i=oe(t,r),o=oe(e,r),a=2<arguments.length?arguments[2]:void 0,u=Math.min((void 0===a?r:oe(a,r))-o,r-i),s=1;for(o<i&&i<o+u&&(s=-1,o+=u-1,i+=u-1);0<u--;)o in n?n[i]=n[o]:delete n[i],i+=s,o+=s;return n},Qr=ne("unscopables"),ti=Array.prototype;null==ti[Qr]&&Zt(ti,Qr,{});var ei=function(t){ti[Qr][t]=!0};ee(ee.P,"Array",{copyWithin:Zr}),ei("copyWithin");var ni=function(t){for(var e=le(this),n=ie(e.length),r=arguments.length,i=oe(1<r?arguments[1]:void 0,n),o=2<r?arguments[2]:void 0,a=void 0===o?n:oe(o,n);i<a;)e[i++]=t;return e};ee(ee.P,"Array",{fill:ni}),ei("fill");var ri=Dr(5),ii="find",oi=!0;ii in[]&&Array(1)[ii](function(){oi=!1}),ee(ee.P+ee.F*oi,"Array",{find:function(t){return ri(this,t,1<arguments.length?arguments[1]:void 0)}}),ei(ii);var ai=Dr(6),ui="findIndex",si=!0;ui in[]&&Array(1)[ui](function(){si=!1}),ee(ee.P+ee.F*si,"Array",{findIndex:function(t){return ai(this,t,1<arguments.length?arguments[1]:void 0)}}),ei(ui);var ci=ne("species"),li=function(t){var e=Bt[t];Kt&&e&&!e[ci]&&Jt.f(e,ci,{configurable:!0,get:function(){return this}})};li("Array");var fi=function(t,e){return{value:e,done:!!t}},hi=Hn(Array,"Array",function(t,e){this._t=M(t),this._i=0,this._k=e},function(){var t=this._t,e=this._k,n=this._i++;return!t||n>=t.length?(this._t=void 0,fi(1)):fi(0,"keys"==e?n:"values"==e?t[n]:[n,t[n]])},"values");Un.Arguments=Un.Array,ei("keys"),ei("values"),ei("entries");var vi=function(){var t=p(this),e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.unicode&&(e+="u"),t.sticky&&(e+="y"),e},pi=Jt.f,di=se.f,yi=Bt.RegExp,gi=yi,mi=yi.prototype,wi=/a/g,bi=/a/g,_i=new yi(wi)!==wi;if(Kt&&(!_i||zt(function(){return bi[ne("match")]=!1,yi(wi)!=wi||yi(bi)==bi||"/a/i"!=yi(wi,"i")}))){yi=function(t,e){var n=this instanceof yi,r=Qn(t),i=void 0===e;return!n&&r&&t.constructor===yi&&i?t:Xe(_i?new gi(r&&!i?t.source:t,e):gi((r=t instanceof yi)?t.source:t,r&&i?vi.call(t):e),n?this:mi,yi)};for(var xi=function(e){e in yi||pi(yi,e,{configurable:!0,get:function(){return gi[e]},set:function(t){gi[e]=t}})},ki=di(gi),Si=0;ki.length>Si;)xi(ki[Si++]);(mi.constructor=yi).prototype=mi,w(Bt,"RegExp",yi)}li("RegExp"),Kt&&"g"!=/./g.flags&&Jt.f(RegExp.prototype,"flags",{configurable:!0,get:vi});var Ti="toString",Ai=/./[Ti],Ei=function(t){w(RegExp.prototype,Ti,t,!0)};zt(function(){return"/a/b"!=Ai.call({source:"a",flags:"b"})})?Ei(function(){var t=p(this);return"/".concat(t.source,"/","flags"in t?t.flags:!Kt&&t instanceof RegExp?vi.call(t):void 0)}):Ai.name!=Ti&&Ei(function(){return Ai.call(this)});var Mi=function(e,t,n){var r=ne(e),i=n(E,r,""[e]),o=i[0],a=i[1];zt(function(){var t={};return t[r]=function(){return 7},7!=""[e](t)})&&(w(String.prototype,e,o),Zt(RegExp.prototype,r,2==t?function(t,e){return a.call(t,this,e)}:function(t){return a.call(t,this)}))};Mi("match",1,function(r,i,t){return[function(t){var e=r(this),n=null==t?void 0:t[i];return void 0!==n?n.call(t,e):new RegExp(t)[i](String(e))},t]}),Mi("replace",2,function(i,o,a){return[function(t,e){var n=i(this),r=null==t?void 0:t[o];return void 0!==r?r.call(t,n,e):a.call(String(n),t,e)},a]}),Mi("search",1,function(r,i,t){return[function(t){var e=r(this),n=null==t?void 0:t[i];return void 0!==n?n.call(t,e):new RegExp(t)[i](String(e))},t]}),Mi("split",2,function(i,o,a){var v=Qn,p=a,d=[].push,t="split",y="length",g="lastIndex";if("c"=="abbc"[t](/(b)*/)[1]||4!="test"[t](/(?:)/,-1)[y]||2!="ab"[t](/(?:ab)*/)[y]||4!="."[t](/(.?)(.?)/)[y]||1<"."[t](/()()/)[y]||""[t](/.?/)[y]){var m=void 0===/()??/.exec("")[1];a=function(t,e){var n=String(this);if(void 0===t&&0===e)return[];if(!v(t))return p.call(n,t,e);var r,i,o,a,u,s=[],c=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),l=0,f=void 0===e?4294967295:e>>>0,h=new RegExp(t.source,c+"g");for(m||(r=new RegExp("^"+h.source+"$(?!\\s)",c));(i=h.exec(n))&&!(l<(o=i.index+i[0][y])&&(s.push(n.slice(l,i.index)),!m&&1<i[y]&&i[0].replace(r,function(){for(u=1;u<arguments[y]-2;u++)void 0===arguments[u]&&(i[u]=void 0)}),1<i[y]&&i.index<n[y]&&d.apply(s,i.slice(1)),a=i[0][y],l=o,s[y]>=f));)h[g]===i.index&&h[g]++;return l===n[y]?!a&&h.test("")||s.push(""):s.push(n.slice(l)),s[y]>f?s.slice(0,f):s}}else"0"[t](void 0,0)[y]&&(a=function(t,e){return void 0===t&&0===e?[]:p.call(this,t,e)});return[function(t,e){var n=i(this),r=null==t?void 0:t[o];return void 0!==r?r.call(t,n,e):a.call(String(n),t,e)},a]});var Oi,Pi,Fi,Ni=function(t,e,n,r){if(!(t instanceof e)||void 0!==r&&r in t)throw TypeError(n+": incorrect invocation!");return t},Ii=e(function(t){var h={},v={},e=t.exports=function(t,e,n,r,i){var o,a,u,s,c=i?function(){return t}:Mr(t),l=te(n,r,e?2:1),f=0;if("function"!=typeof c)throw TypeError(t+" is not iterable!");if(Tr(c)){for(o=ie(t.length);f<o;f++)if((s=e?l(p(a=t[f])[0],a[1]):l(t[f]))===h||s===v)return s}else for(u=c.call(t);!(a=u.next()).done;)if((s=xr(u,l,a.value,e))===h||s===v)return s};e.BREAK=h,e.RETURN=v}),ji=ne("species"),Ci=function(t,e){var n,r=p(t).constructor;return void 0===r||null==(n=p(r)[ji])?e:l(n)},Vi=Bt.process,Ri=Bt.setImmediate,Li=Bt.clearImmediate,Di=Bt.MessageChannel,Gi=Bt.Dispatch,qi=0,Ui={},Xi="onreadystatechange",Bi=function(){var t=+this;if(Ui.hasOwnProperty(t)){var e=Ui[t];delete Ui[t],e()}},Wi=function(t){Bi.call(t.data)};Ri&&Li||(Ri=function(t){for(var e=[],n=1;arguments.length>n;)e.push(arguments[n++]);return Ui[++qi]=function(){we("function"==typeof t?t:Function(t),e)},Oi(qi),qi},Li=function(t){delete Ui[t]},"process"==T(Vi)?Oi=function(t){Vi.nextTick(te(Bi,t,1))}:Gi&&Gi.now?Oi=function(t){Gi.now(te(Bi,t,1))}:Di?(Fi=(Pi=new Di).port2,Pi.port1.onmessage=Wi,Oi=te(Fi.postMessage,Fi,1)):Bt.addEventListener&&"function"==typeof postMessage&&!Bt.importScripts?(Oi=function(t){Bt.postMessage(t+"","*")},Bt.addEventListener("message",Wi,!1)):Oi=Xi in o("script")?function(t){K.appendChild(o("script"))[Xi]=function(){K.removeChild(this),Bi.call(t)}}:function(t){setTimeout(te(Bi,t,1),0)});var zi={set:Ri,clear:Li},Ki=zi.set,Yi=Bt.MutationObserver||Bt.WebKitMutationObserver,Hi=Bt.process,Ji=Bt.Promise,$i="process"==T(Hi),Zi=function(){var n,r,i,t=function(){var t,e;for($i&&(t=Hi.domain)&&t.exit();n;){e=n.fn,n=n.next;try{e()}catch(t){throw n?i():r=void 0,t}}r=void 0,t&&t.enter()};if($i)i=function(){Hi.nextTick(t)};else if(!Yi||Bt.navigator&&Bt.navigator.standalone)if(Ji&&Ji.resolve){var e=Ji.resolve(void 0);i=function(){e.then(t)}}else i=function(){Ki.call(Bt,t)};else{var o=!0,a=document.createTextNode("");new Yi(t).observe(a,{characterData:!0}),i=function(){a.data=o=!o}}return function(t){var e={fn:t,next:void 0};r&&(r.next=e),n||(n=e,i()),r=e}};function Qi(t){var n,r;this.promise=new t(function(t,e){if(void 0!==n||void 0!==r)throw TypeError("Bad Promise constructor");n=t,r=e}),this.resolve=l(n),this.reject=l(r)}var to,eo,no,ro,io={f:function(t){return new Qi(t)}},oo=function(t){try{return{e:!1,v:t()}}catch(t){return{e:!0,v:t}}},ao=Bt.navigator,uo=ao&&ao.userAgent||"",so=function(t,e){if(p(t),Yt(e)&&e.constructor===t)return e;var n=io.f(t);return(0,n.resolve)(e),n.promise},co=function(t,e,n){for(var r in e)w(t,r,e[r],n);return t},lo=zi.set,fo=Zi(),ho="Promise",vo=Bt.TypeError,po=Bt.process,yo=po&&po.versions,go=yo&&yo.v8||"",mo=Bt[ho],wo="process"==ge(po),bo=function(){},_o=eo=io.f,xo=!!function(){try{var t=mo.resolve(1),e=(t.constructor={})[ne("species")]=function(t){t(bo,bo)};return(wo||"function"==typeof PromiseRejectionEvent)&&t.then(bo)instanceof e&&0!==go.indexOf("6.6")&&-1===uo.indexOf("Chrome/66")}catch(t){}}(),ko=function(t){var e;return!(!Yt(t)||"function"!=typeof(e=t.then))&&e},So=function(l,n){if(!l._n){l._n=!0;var r=l._c;fo(function(){for(var s=l._v,c=1==l._s,t=0,e=function(t){var e,n,r,i=c?t.ok:t.fail,o=t.resolve,a=t.reject,u=t.domain;try{i?(c||(2==l._h&&Eo(l),l._h=1),!0===i?e=s:(u&&u.enter(),e=i(s),u&&(u.exit(),r=!0)),e===t.promise?a(vo("Promise-chain cycle")):(n=ko(e))?n.call(e,o,a):o(e)):a(s)}catch(t){u&&!r&&u.exit(),a(t)}};r.length>t;)e(r[t++]);l._c=[],l._n=!1,n&&!l._h&&To(l)})}},To=function(o){lo.call(Bt,function(){var t,e,n,r=o._v,i=Ao(o);if(i&&(t=oo(function(){wo?po.emit("unhandledRejection",r,o):(e=Bt.onunhandledrejection)?e({promise:o,reason:r}):(n=Bt.console)&&n.error&&n.error("Unhandled promise rejection",r)}),o._h=wo||Ao(o)?2:1),o._a=void 0,i&&t.e)throw t.v})},Ao=function(t){return 1!==t._h&&0===(t._a||t._c).length},Eo=function(e){lo.call(Bt,function(){var t;wo?po.emit("rejectionHandled",e):(t=Bt.onrejectionhandled)&&t({promise:e,reason:e._v})})},Mo=function(t){var e=this;e._d||(e._d=!0,(e=e._w||e)._v=t,e._s=2,e._a||(e._a=e._c.slice()),So(e,!0))},Oo=function(t){var n,r=this;if(!r._d){r._d=!0,r=r._w||r;try{if(r===t)throw vo("Promise can't be resolved itself");(n=ko(t))?fo(function(){var e={_w:r,_d:!1};try{n.call(t,te(Oo,e,1),te(Mo,e,1))}catch(t){Mo.call(e,t)}}):(r._v=t,r._s=1,So(r,!1))}catch(t){Mo.call({_w:r,_d:!1},t)}}};xo||(mo=function(t){Ni(this,mo,ho,"_h"),l(t),to.call(this);try{t(te(Oo,this,1),te(Mo,this,1))}catch(t){Mo.call(this,t)}},(to=function(t){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1}).prototype=co(mo.prototype,{then:function(t,e){var n=_o(Ci(this,mo));return n.ok="function"!=typeof t||t,n.fail="function"==typeof e&&e,n.domain=wo?po.domain:void 0,this._c.push(n),this._a&&this._a.push(n),this._s&&So(this,!1),n.promise},catch:function(t){return this.then(void 0,t)}}),no=function(){var t=new to;this.promise=t,this.resolve=te(Oo,t,1),this.reject=te(Mo,t,1)},io.f=_o=function(t){return t===mo||t===ro?new no(t):eo(t)}),ee(ee.G+ee.W+ee.F*!xo,{Promise:mo}),q(mo,ho),li(ho),ro=d[ho],ee(ee.S+ee.F*!xo,ho,{reject:function(t){var e=_o(this);return(0,e.reject)(t),e.promise}}),ee(ee.S+ee.F*!xo,ho,{resolve:function(t){return so(this,t)}}),ee(ee.S+ee.F*!(xo&&Fr(function(t){mo.all(t).catch(bo)})),ho,{all:function(t){var a=this,e=_o(a),u=e.resolve,s=e.reject,n=oo(function(){var r=[],i=0,o=1;Ii(t,!1,function(t){var e=i++,n=!1;r.push(void 0),o++,a.resolve(t).then(function(t){n||(n=!0,r[e]=t,--o||u(r))},s)}),--o||u(r)});return n.e&&s(n.v),e.promise},race:function(t){var e=this,n=_o(e),r=n.reject,i=oo(function(){Ii(t,!1,function(t){e.resolve(t).then(n.resolve,r)})});return i.e&&r(i.v),n.promise}});var Po=function(t,e){if(!Yt(t)||t._t!==e)throw TypeError("Incompatible receiver, "+e+" required!");return t},Fo=Jt.f,No=m.fastKey,Io=Kt?"_s":"size",jo=function(t,e){var n,r=No(e);if("F"!==r)return t._i[r];for(n=t._f;n;n=n.n)if(n.k==e)return n},Co={getConstructor:function(t,o,n,r){var i=t(function(t,e){Ni(t,i,o,"_i"),t._t=o,t._i=ue(null),t._f=void 0,t._l=void 0,t[Io]=0,null!=e&&Ii(e,n,t[r],t)});return co(i.prototype,{clear:function(){for(var t=Po(this,o),e=t._i,n=t._f;n;n=n.n)n.r=!0,n.p&&(n.p=n.p.n=void 0),delete e[n.i];t._f=t._l=void 0,t[Io]=0},delete:function(t){var e=Po(this,o),n=jo(e,t);if(n){var r=n.n,i=n.p;delete e._i[n.i],n.r=!0,i&&(i.n=r),r&&(r.p=i),e._f==n&&(e._f=r),e._l==n&&(e._l=i),e[Io]--}return!!n},forEach:function(t){Po(this,o);for(var e,n=te(t,1<arguments.length?arguments[1]:void 0,3);e=e?e.n:this._f;)for(n(e.v,e.k,this);e&&e.r;)e=e.p},has:function(t){return!!jo(Po(this,o),t)}}),Kt&&Fo(i.prototype,"size",{get:function(){return Po(this,o)[Io]}}),i},def:function(t,e,n){var r,i,o=jo(t,e);return o?o.v=n:(t._l=o={i:i=No(e,!0),k:e,v:n,p:r=t._l,n:void 0,r:!1},t._f||(t._f=o),r&&(r.n=o),t[Io]++,"F"!==i&&(t._i[i]=o)),t},getEntry:jo,setStrong:function(t,n,e){Hn(t,n,function(t,e){this._t=Po(t,n),this._k=e,this._l=void 0},function(){for(var t=this,e=t._k,n=t._l;n&&n.r;)n=n.p;return t._t&&(t._l=n=n?n.n:t._t._f)?fi(0,"keys"==e?n.k:"values"==e?n.v:[n.k,n.v]):(t._t=void 0,fi(1))},e?"entries":"values",!e,!0),li(n)}},Vo=function(r,t,e,n,i,o){var a=Bt[r],u=a,s=i?"set":"add",c=u&&u.prototype,l={},f=function(t){var n=c[t];w(c,t,"delete"==t?function(t){return!(o&&!Yt(t))&&n.call(this,0===t?0:t)}:"has"==t?function(t){return!(o&&!Yt(t))&&n.call(this,0===t?0:t)}:"get"==t?function(t){return o&&!Yt(t)?void 0:n.call(this,0===t?0:t)}:"add"==t?function(t){return n.call(this,0===t?0:t),this}:function(t,e){return n.call(this,0===t?0:t,e),this})};if("function"==typeof u&&(o||c.forEach&&!zt(function(){(new u).entries().next()}))){var h=new u,v=h[s](o?{}:-0,1)!=h,p=zt(function(){h.has(1)}),d=Fr(function(t){new u(t)}),y=!o&&zt(function(){for(var t=new u,e=5;e--;)t[s](e,e);return!t.has(-0)});d||(((u=t(function(t,e){Ni(t,u,r);var n=Xe(new a,t,u);return null!=e&&Ii(e,i,n[s],n),n})).prototype=c).constructor=u),(p||y)&&(f("delete"),f("has"),i&&f("get")),(y||v)&&f(s),o&&c.clear&&delete c.clear}else u=n.getConstructor(t,r,i,s),co(u.prototype,e),m.NEED=!0;return q(u,r),l[r]=u,ee(ee.G+ee.W+ee.F*(u!=a),l),o||n.setStrong(u,r,i),u},Ro=Vo("Map",function(t){return function(){return t(this,0<arguments.length?arguments[0]:void 0)}},{get:function(t){var e=Co.getEntry(Po(this,"Map"),t);return e&&e.v},set:function(t,e){return Co.def(Po(this,"Map"),0===t?0:t,e)}},Co,!0),Lo=Vo("Set",function(t){return function(){return t(this,0<arguments.length?arguments[0]:void 0)}},{add:function(t){return Co.def(Po(this,"Set"),t=0===t?0:t,t)}},Co),Do=m.getWeak,Go=Dr(5),qo=Dr(6),Uo=0,Xo=function(t){return t._l||(t._l=new Bo)},Bo=function(){this.a=[]},Wo=function(t,e){return Go(t.a,function(t){return t[0]===e})};Bo.prototype={get:function(t){var e=Wo(this,t);if(e)return e[1]},has:function(t){return!!Wo(this,t)},set:function(t,e){var n=Wo(this,t);n?n[1]=e:this.a.push([t,e])},delete:function(e){var t=qo(this.a,function(t){return t[0]===e});return~t&&this.a.splice(t,1),!!~t}};var zo={getConstructor:function(t,n,r,i){var o=t(function(t,e){Ni(t,o,n,"_i"),t._t=n,t._i=Uo++,t._l=void 0,null!=e&&Ii(e,r,t[i],t)});return co(o.prototype,{delete:function(t){if(!Yt(t))return!1;var e=Do(t);return!0===e?Xo(Po(this,n)).delete(t):e&&Wt(e,this._i)&&delete e[this._i]},has:function(t){if(!Yt(t))return!1;var e=Do(t);return!0===e?Xo(Po(this,n)).has(t):e&&Wt(e,this._i)}}),o},def:function(t,e,n){var r=Do(p(e),!0);return!0===r?Xo(t).set(e,n):r[t._i]=n,t},ufstore:Xo},Ko=e(function(t){var o,e=Dr(0),n="WeakMap",r=m.getWeak,a=Object.isExtensible,i=zo.ufstore,u={},s=function(t){return function(){return t(this,0<arguments.length?arguments[0]:void 0)}},c={get:function(t){if(Yt(t)){var e=r(t);return!0===e?i(Po(this,n)).get(t):e?e[this._i]:void 0}},set:function(t,e){return zo.def(Po(this,n),t,e)}},l=t.exports=Vo(n,s,c,zo,!0,!0);zt(function(){return 7!=(new l).set((Object.freeze||Object)(u),7).get(u)})&&(o=zo.getConstructor(s,n),Xt(o.prototype,c),m.NEED=!0,e(["delete","has","get","set"],function(r){var t=l.prototype,i=t[r];w(t,r,function(t,e){if(Yt(t)&&!a(t)){this._f||(this._f=new o);var n=this._f[r](t,e);return"set"==r?this:n}return i.call(this,t,e)})}))}),Yo="WeakSet";Vo(Yo,function(t){return function(){return t(this,0<arguments.length?arguments[0]:void 0)}},{add:function(t){return zo.def(Po(this,Yo),t,!0)}},zo,!1,!0);for(var Ho,Jo=Qt("typed_array"),$o=Qt("view"),Zo=!(!Bt.ArrayBuffer||!Bt.DataView),Qo=Zo,ta=0,ea="Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array".split(",");ta<9;)(Ho=Bt[ea[ta++]])?(Zt(Ho.prototype,Jo,!0),Zt(Ho.prototype,$o,!0)):Qo=!1;var na={ABV:Zo,CONSTR:Qo,TYPED:Jo,VIEW:$o},ra=function(t){if(void 0===t)return 0;var e=re(t),n=ie(e);if(e!==n)throw RangeError("Wrong length!");return n},ia=e(function(t,e){var n=se.f,r=Jt.f,i="ArrayBuffer",o="DataView",a="prototype",f="Wrong index!",u=Bt[i],s=Bt[o],c=Bt.Math,h=Bt.RangeError,v=Bt.Infinity,l=u,p=c.abs,d=c.pow,y=c.floor,g=c.log,m=c.LN2,w="byteLength",b="byteOffset",_=Kt?"_b":"buffer",x=Kt?"_l":w,k=Kt?"_o":b;function S(t,e,n){var r,i,o,a=new Array(n),u=8*n-e-1,s=(1<<u)-1,c=s>>1,l=23===e?d(2,-24)-d(2,-77):0,f=0,h=t<0||0===t&&1/t<0?1:0;for((t=p(t))!=t||t===v?(i=t!=t?1:0,r=s):(r=y(g(t)/m),t*(o=d(2,-r))<1&&(r--,o*=2),2<=(t+=1<=r+c?l/o:l*d(2,1-c))*o&&(r++,o/=2),s<=r+c?(i=0,r=s):1<=r+c?(i=(t*o-1)*d(2,e),r+=c):(i=t*d(2,c-1)*d(2,e),r=0));8<=e;a[f++]=255&i,i/=256,e-=8);for(r=r<<e|i,u+=e;0<u;a[f++]=255&r,r/=256,u-=8);return a[--f]|=128*h,a}function T(t,e,n){var r,i=8*n-e-1,o=(1<<i)-1,a=o>>1,u=i-7,s=n-1,c=t[s--],l=127&c;for(c>>=7;0<u;l=256*l+t[s],s--,u-=8);for(r=l&(1<<-u)-1,l>>=-u,u+=e;0<u;r=256*r+t[s],s--,u-=8);if(0===l)l=1-a;else{if(l===o)return r?NaN:c?-v:v;r+=d(2,e),l-=a}return(c?-1:1)*r*d(2,l-e)}function A(t){return t[3]<<24|t[2]<<16|t[1]<<8|t[0]}function E(t){return[255&t]}function M(t){return[255&t,t>>8&255]}function O(t){return[255&t,t>>8&255,t>>16&255,t>>24&255]}function P(t){return S(t,52,8)}function F(t){return S(t,23,4)}function N(t,e,n){r(t[a],e,{get:function(){return this[n]}})}function I(t,e,n,r){var i=ra(+n);if(i+e>t[x])throw h(f);var o=t[_]._b,a=i+t[k],u=o.slice(a,a+e);return r?u:u.reverse()}function j(t,e,n,r,i,o){var a=ra(+n);if(a+e>t[x])throw h(f);for(var u=t[_]._b,s=a+t[k],c=r(+i),l=0;l<e;l++)u[s+l]=c[o?l:e-l-1]}if(na.ABV){if(!zt(function(){u(1)})||!zt(function(){new u(-1)})||zt(function(){return new u,new u(1.5),new u(NaN),u.name!=i})){for(var C,V=(u=function(t){return Ni(this,u),new l(ra(t))})[a]=l[a],R=n(l),L=0;R.length>L;)(C=R[L++])in u||Zt(u,C,l[C]);V.constructor=u}var D=new s(new u(2)),G=s[a].setInt8;D.setInt8(0,2147483648),D.setInt8(1,2147483649),!D.getInt8(0)&&D.getInt8(1)||co(s[a],{setInt8:function(t,e){G.call(this,t,e<<24>>24)},setUint8:function(t,e){G.call(this,t,e<<24>>24)}},!0)}else u=function(t){Ni(this,u,i);var e=ra(t);this._b=ni.call(new Array(e),0),this[x]=e},s=function(t,e,n){Ni(this,s,o),Ni(t,u,o);var r=t[x],i=re(e);if(i<0||r<i)throw h("Wrong offset!");if(r<i+(n=void 0===n?r-i:ie(n)))throw h("Wrong length!");this[_]=t,this[k]=i,this[x]=n},Kt&&(N(u,w,"_l"),N(s,"buffer","_b"),N(s,w,"_l"),N(s,b,"_o")),co(s[a],{getInt8:function(t){return I(this,1,t)[0]<<24>>24},getUint8:function(t){return I(this,1,t)[0]},getInt16:function(t){var e=I(this,2,t,arguments[1]);return(e[1]<<8|e[0])<<16>>16},getUint16:function(t){var e=I(this,2,t,arguments[1]);return e[1]<<8|e[0]},getInt32:function(t){return A(I(this,4,t,arguments[1]))},getUint32:function(t){return A(I(this,4,t,arguments[1]))>>>0},getFloat32:function(t){return T(I(this,4,t,arguments[1]),23,4)},getFloat64:function(t){return T(I(this,8,t,arguments[1]),52,8)},setInt8:function(t,e){j(this,1,t,E,e)},setUint8:function(t,e){j(this,1,t,E,e)},setInt16:function(t,e){j(this,2,t,M,e,arguments[2])},setUint16:function(t,e){j(this,2,t,M,e,arguments[2])},setInt32:function(t,e){j(this,4,t,O,e,arguments[2])},setUint32:function(t,e){j(this,4,t,O,e,arguments[2])},setFloat32:function(t,e){j(this,4,t,F,e,arguments[2])},setFloat64:function(t,e){j(this,8,t,P,e,arguments[2])}});q(u,i),q(s,o),Zt(s[a],na.VIEW,!0),e[i]=u,e[o]=s}),oa=Bt.ArrayBuffer,aa=ia.ArrayBuffer,ua=ia.DataView,sa=na.ABV&&oa.isView,ca=aa.prototype.slice,la=na.VIEW,fa="ArrayBuffer";ee(ee.G+ee.W+ee.F*(oa!==aa),{ArrayBuffer:aa}),ee(ee.S+ee.F*!na.CONSTR,fa,{isView:function(t){return sa&&sa(t)||Yt(t)&&la in t}}),ee(ee.P+ee.U+ee.F*zt(function(){return!new aa(2).slice(1,void 0).byteLength}),fa,{slice:function(t,e){if(void 0!==ca&&void 0===e)return ca.call(p(this),t);for(var n=p(this).byteLength,r=oe(t,n),i=oe(void 0===e?n:e,n),o=new(Ci(this,aa))(ie(i-r)),a=new ua(this),u=new ua(o),s=0;r<i;)u.setUint8(s++,a.getUint8(r++));return o}}),li(fa),ee(ee.G+ee.W+ee.F*!na.ABV,{DataView:ia.DataView});var ha=e(function(t){if(Kt){var g=Bt,m=zt,w=ee,b=na,e=ia,h=te,_=Ni,n=$t,x=Zt,r=co,i=re,k=ie,S=ra,o=oe,a=Ht,u=Wt,T=ge,A=Yt,v=le,p=Tr,E=ue,M=fe,O=se.f,d=Mr,s=Qt,c=ne,l=Dr,f=ae,y=Ci,P=hi,F=Un,N=Fr,I=li,j=ni,C=Zr,V=Jt,R=ce,L=V.f,D=R.f,G=g.RangeError,q=g.TypeError,U=g.Uint8Array,X="ArrayBuffer",B="Shared"+X,W="BYTES_PER_ELEMENT",z="prototype",K=Array[z],Y=e.ArrayBuffer,H=e.DataView,J=l(0),$=l(2),Z=l(3),Q=l(4),tt=l(5),et=l(6),nt=f(!0),rt=f(!1),it=P.values,ot=P.keys,at=P.entries,ut=K.lastIndexOf,st=K.reduce,ct=K.reduceRight,lt=K.join,ft=K.sort,ht=K.slice,vt=K.toString,pt=K.toLocaleString,dt=c("iterator"),yt=c("toStringTag"),gt=s("typed_constructor"),mt=s("def_constructor"),wt=b.CONSTR,bt=b.TYPED,_t=b.VIEW,xt="Wrong length!",kt=l(1,function(t,e){return Mt(y(t,t[mt]),e)}),St=m(function(){return 1===new U(new Uint16Array([1]).buffer)[0]}),Tt=!!U&&!!U[z].set&&m(function(){new U(1).set({})}),At=function(t,e){var n=i(t);if(n<0||n%e)throw G("Wrong offset!");return n},Et=function(t){if(A(t)&&bt in t)return t;throw q(t+" is not a typed array!")},Mt=function(t,e){if(!(A(t)&&gt in t))throw q("It is not a typed array constructor!");return new t(e)},Ot=function(t,e){return Pt(y(t,t[mt]),e)},Pt=function(t,e){for(var n=0,r=e.length,i=Mt(t,r);n<r;)i[n]=e[n++];return i},Ft=function(t,e,n){L(t,e,{get:function(){return this._d[n]}})},Nt=function(t){var e,n,r,i,o,a,u=v(t),s=arguments.length,c=1<s?arguments[1]:void 0,l=void 0!==c,f=d(u);if(null!=f&&!p(f)){for(a=f.call(u),r=[],e=0;!(o=a.next()).done;e++)r.push(o.value);u=r}for(l&&2<s&&(c=h(c,arguments[2],2)),e=0,n=k(u.length),i=Mt(this,n);e<n;e++)i[e]=l?c(u[e],e):u[e];return i},It=function(){for(var t=0,e=arguments.length,n=Mt(this,e);t<e;)n[t]=arguments[t++];return n},jt=!!U&&m(function(){pt.call(new U(1))}),Ct=function(){return pt.apply(jt?ht.call(Et(this)):Et(this),arguments)},Vt={copyWithin:function(t,e){return C.call(Et(this),t,e,2<arguments.length?arguments[2]:void 0)},every:function(t){return Q(Et(this),t,1<arguments.length?arguments[1]:void 0)},fill:function(t){return j.apply(Et(this),arguments)},filter:function(t){return Ot(this,$(Et(this),t,1<arguments.length?arguments[1]:void 0))},find:function(t){return tt(Et(this),t,1<arguments.length?arguments[1]:void 0)},findIndex:function(t){return et(Et(this),t,1<arguments.length?arguments[1]:void 0)},forEach:function(t){J(Et(this),t,1<arguments.length?arguments[1]:void 0)},indexOf:function(t){return rt(Et(this),t,1<arguments.length?arguments[1]:void 0)},includes:function(t){return nt(Et(this),t,1<arguments.length?arguments[1]:void 0)},join:function(t){return lt.apply(Et(this),arguments)},lastIndexOf:function(t){return ut.apply(Et(this),arguments)},map:function(t){return kt(Et(this),t,1<arguments.length?arguments[1]:void 0)},reduce:function(t){return st.apply(Et(this),arguments)},reduceRight:function(t){return ct.apply(Et(this),arguments)},reverse:function(){for(var t,e=this,n=Et(e).length,r=Math.floor(n/2),i=0;i<r;)t=e[i],e[i++]=e[--n],e[n]=t;return e},some:function(t){return Z(Et(this),t,1<arguments.length?arguments[1]:void 0)},sort:function(t){return ft.call(Et(this),t)},subarray:function(t,e){var n=Et(this),r=n.length,i=o(t,r);return new(y(n,n[mt]))(n.buffer,n.byteOffset+i*n.BYTES_PER_ELEMENT,k((void 0===e?r:o(e,r))-i))}},Rt=function(t,e){return Ot(this,ht.call(Et(this),t,e))},Lt=function(t){Et(this);var e=At(arguments[1],1),n=this.length,r=v(t),i=k(r.length),o=0;if(n<i+e)throw G(xt);for(;o<i;)this[e+o]=r[o++]},Dt={entries:function(){return at.call(Et(this))},keys:function(){return ot.call(Et(this))},values:function(){return it.call(Et(this))}},Gt=function(t,e){return A(t)&&t[bt]&&"symbol"!=typeof e&&e in t&&String(+e)==String(e)},qt=function(t,e){return Gt(t,e=a(e,!0))?n(2,t[e]):D(t,e)},Ut=function(t,e,n){return!(Gt(t,e=a(e,!0))&&A(n)&&u(n,"value"))||u(n,"get")||u(n,"set")||n.configurable||u(n,"writable")&&!n.writable||u(n,"enumerable")&&!n.enumerable?L(t,e,n):(t[e]=n.value,t)};wt||(R.f=qt,V.f=Ut),w(w.S+w.F*!wt,"Object",{getOwnPropertyDescriptor:qt,defineProperty:Ut}),m(function(){vt.call({})})&&(vt=pt=function(){return lt.call(this)});var Xt=r({},Vt);r(Xt,Dt),x(Xt,dt,Dt.values),r(Xt,{slice:Rt,set:Lt,constructor:function(){},toString:vt,toLocaleString:Ct}),Ft(Xt,"buffer","b"),Ft(Xt,"byteOffset","o"),Ft(Xt,"byteLength","l"),Ft(Xt,"length","e"),L(Xt,yt,{get:function(){return this[bt]}}),t.exports=function(t,f,e,o){var h=t+((o=!!o)?"Clamped":"")+"Array",n="get"+t,a="set"+t,v=g[h],u=v||{},r=v&&M(v),i=!v||!b.ABV,s={},c=v&&v[z],p=function(t,i){L(t,i,{get:function(){return t=i,(e=this._d).v[n](t*f+e.o,St);var t,e},set:function(t){return e=i,n=t,r=this._d,o&&(n=(n=Math.round(n))<0?0:255<n?255:255&n),void r.v[a](e*f+r.o,n,St);var e,n,r},enumerable:!0})};i?(v=e(function(t,e,n,r){_(t,v,h,"_d");var i,o,a,u,s=0,c=0;if(A(e)){if(!(e instanceof Y||(u=T(e))==X||u==B))return bt in e?Pt(v,e):Nt.call(v,e);i=e,c=At(n,f);var l=e.byteLength;if(void 0===r){if(l%f)throw G(xt);if((o=l-c)<0)throw G(xt)}else if(l<(o=k(r)*f)+c)throw G(xt);a=o/f}else a=S(e),i=new Y(o=a*f);for(x(t,"_d",{b:i,o:c,l:o,e:a,v:new H(i)});s<a;)p(t,s++)}),c=v[z]=E(Xt),x(c,"constructor",v)):m(function(){v(1)})&&m(function(){new v(-1)})&&N(function(t){new v,new v(null),new v(1.5),new v(t)},!0)||(v=e(function(t,e,n,r){var i;return _(t,v,h),A(e)?e instanceof Y||(i=T(e))==X||i==B?void 0!==r?new u(e,At(n,f),r):void 0!==n?new u(e,At(n,f)):new u(e):bt in e?Pt(v,e):Nt.call(v,e):new u(S(e))}),J(r!==Function.prototype?O(u).concat(O(r)):O(u),function(t){t in v||x(v,t,u[t])}),(v[z]=c).constructor=v);var l=c[dt],d=!!l&&("values"==l.name||null==l.name),y=Dt.values;x(v,gt,!0),x(c,bt,h),x(c,_t,!0),x(c,mt,v),(o?new v(1)[yt]==h:yt in c)||L(c,yt,{get:function(){return h}}),s[h]=v,w(w.G+w.W+w.F*(v!=u),s),w(w.S,h,{BYTES_PER_ELEMENT:f}),w(w.S+w.F*m(function(){u.of.call(v,1)}),h,{from:Nt,of:It}),W in c||x(c,W,f),w(w.P,h,Vt),I(h),w(w.P+w.F*Tt,h,{set:Lt}),w(w.P+w.F*!d,h,Dt),c.toString!=vt&&(c.toString=vt),w(w.P+w.F*m(function(){new v(1).slice()}),h,{slice:Rt}),w(w.P+w.F*(m(function(){return[1,2].toLocaleString()!=new v([1,2]).toLocaleString()})||!m(function(){c.toLocaleString.call([1,2])})),h,{toLocaleString:Ct}),F[h]=d?l:y,d||x(c,dt,y)}}else t.exports=function(){}});ha("Int8",1,function(r){return function(t,e,n){return r(this,t,e,n)}}),ha("Uint8",1,function(r){return function(t,e,n){return r(this,t,e,n)}}),ha("Uint8",1,function(r){return function(t,e,n){return r(this,t,e,n)}},!0),ha("Int16",2,function(r){return function(t,e,n){return r(this,t,e,n)}}),ha("Uint16",2,function(r){return function(t,e,n){return r(this,t,e,n)}}),ha("Int32",4,function(r){return function(t,e,n){return r(this,t,e,n)}}),ha("Uint32",4,function(r){return function(t,e,n){return r(this,t,e,n)}}),ha("Float32",4,function(r){return function(t,e,n){return r(this,t,e,n)}}),ha("Float64",8,function(r){return function(t,e,n){return r(this,t,e,n)}});var va=(Bt.Reflect||{}).apply,pa=Function.apply;ee(ee.S+ee.F*!zt(function(){va(function(){})}),"Reflect",{apply:function(t,e,n){var r=l(t),i=p(n);return va?va(r,e,i):pa.call(r,e,i)}});var da=(Bt.Reflect||{}).construct,ya=zt(function(){function t(){}return!(da(function(){},[],t)instanceof t)}),ga=!zt(function(){da(function(){})});ee(ee.S+ee.F*(ya||ga),"Reflect",{construct:function(t,e){l(t),p(e);var n=arguments.length<3?t:l(arguments[2]);if(ga&&!ya)return da(t,e,n);if(t==n){switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3])}var r=[null];return r.push.apply(r,e),new(xe.apply(t,r))}var i=n.prototype,o=ue(Yt(i)?i:Object.prototype),a=Function.apply.call(t,o,e);return Yt(a)?a:o}}),ee(ee.S+ee.F*zt(function(){Reflect.defineProperty(Jt.f({},1,{value:1}),1,{value:2})}),"Reflect",{defineProperty:function(t,e,n){p(t),e=Ht(e,!0),p(n);try{return Jt.f(t,e,n),!0}catch(t){return!1}}});var ma=ce.f;ee(ee.S,"Reflect",{deleteProperty:function(t,e){var n=ma(p(t),e);return!(n&&!n.configurable)&&delete t[e]}});var wa=function(t){this._t=p(t),this._i=0;var e,n=this._k=[];for(e in t)n.push(e)};Bn(wa,"Object",function(){var t,e=this._k;do{if(this._i>=e.length)return{value:void 0,done:!0}}while(!((t=e[this._i++])in this._t));return{value:t,done:!1}}),ee(ee.S,"Reflect",{enumerate:function(t){return new wa(t)}}),ee(ee.S,"Reflect",{get:function t(e,n){var r,i,o=arguments.length<3?e:arguments[2];return p(e)===o?e[n]:(r=ce.f(e,n))?Wt(r,"value")?r.value:void 0!==r.get?r.get.call(o):void 0:Yt(i=fe(e))?t(i,n,o):void 0}}),ee(ee.S,"Reflect",{getOwnPropertyDescriptor:function(t,e){return ce.f(p(t),e)}}),ee(ee.S,"Reflect",{getPrototypeOf:function(t){return fe(p(t))}}),ee(ee.S,"Reflect",{has:function(t,e){return e in t}});var ba=Object.isExtensible;ee(ee.S,"Reflect",{isExtensible:function(t){return p(t),!ba||ba(t)}});var _a=Bt.Reflect,xa=_a&&_a.ownKeys||function(t){var e=se.f(p(t)),n=U.f;return n?e.concat(n(t)):e};ee(ee.S,"Reflect",{ownKeys:xa});var ka=Object.preventExtensions;ee(ee.S,"Reflect",{preventExtensions:function(t){p(t);try{return ka&&ka(t),!0}catch(t){return!1}}}),ee(ee.S,"Reflect",{set:function t(e,n,r){var i,o,a=arguments.length<4?e:arguments[3],u=ce.f(p(e),n);if(!u){if(Yt(o=fe(e)))return t(o,n,r,a);u=$t(0)}if(Wt(u,"value")){if(!1===u.writable||!Yt(a))return!1;if(i=ce.f(a,n)){if(i.get||i.set||!1===i.writable)return!1;i.value=r,Jt.f(a,n,i)}else Jt.f(a,n,$t(0,r));return!0}return void 0!==u.set&&(u.set.call(a,r),!0)}}),pe&&ee(ee.S,"Reflect",{setPrototypeOf:function(t,e){pe.check(t,e);try{return pe.set(t,e),!0}catch(t){return!1}}});var Sa=ae(!0);ee(ee.P,"Array",{includes:function(t){return Sa(this,t,1<arguments.length?arguments[1]:void 0)}}),ei("includes");var Ta=ne("isConcatSpreadable");var Aa=function t(e,n,r,i,o,a,u,s){for(var c,l,f=o,h=0,v=!!u&&te(u,s,3);h<i;){if(h in r){if(c=v?v(r[h],h,n):r[h],l=!1,Yt(c)&&(l=void 0!==(l=c[Ta])?!!l:B(c)),l&&0<a)f=t(e,n,c,ie(c.length),f,a-1)-1;else{if(9007199254740991<=f)throw TypeError();e[f]=c}f++}h++}return f};ee(ee.P,"Array",{flatMap:function(t){var e,n,r=le(this);return l(t),e=ie(r.length),n=Lr(r,0),Aa(n,r,r,e,0,1,t,arguments[1]),n}}),ei("flatMap"),ee(ee.P,"Array",{flatten:function(){var t=arguments[0],e=le(this),n=ie(e.length),r=Lr(e,0);return Aa(r,e,e,n,0,void 0===t?1:re(t)),r}}),ei("flatten");var Ea=qn(!0);ee(ee.P,"String",{at:function(t){return Ea(this,t)}});var Ma=function(t,e,n,r){var i=String(E(t)),o=i.length,a=void 0===n?" ":String(n),u=ie(e);if(u<=o||""==a)return i;var s=u-o,c=an.call(a,Math.ceil(s/a.length));return c.length>s&&(c=c.slice(0,s)),r?c+i:i+c};ee(ee.P+ee.F*/Version\/10\.\d+(\.\d+)? Safari\//.test(uo),"String",{padStart:function(t){return Ma(this,t,1<arguments.length?arguments[1]:void 0,!0)}}),ee(ee.P+ee.F*/Version\/10\.\d+(\.\d+)? Safari\//.test(uo),"String",{padEnd:function(t){return Ma(this,t,1<arguments.length?arguments[1]:void 0,!1)}}),je("trimLeft",function(t){return function(){return t(this,1)}},"trimStart"),je("trimRight",function(t){return function(){return t(this,2)}},"trimEnd");var Oa=RegExp.prototype,Pa=function(t,e){this._r=t,this._s=e};Bn(Pa,"RegExp String",function(){var t=this._r.exec(this._s);return{value:t,done:null===t}}),ee(ee.P,"String",{matchAll:function(t){if(E(this),!Qn(t))throw TypeError(t+" is not a regexp!");var e=String(this),n="flags"in Oa?String(t.flags):vi.call(t),r=new RegExp(t.source,~n.indexOf("g")?n:"g"+n);return r.lastIndex=ie(t.lastIndex),new Pa(r,e)}}),k("asyncIterator"),k("observable"),ee(ee.S,"Object",{getOwnPropertyDescriptors:function(t){for(var e,n,r=M(t),i=ce.f,o=xa(r),a={},u=0;o.length>u;)void 0!==(n=i(r,e=o[u++]))&&Ar(a,e,n);return a}});var Fa=X.f,Na=function(u){return function(t){for(var e,n=M(t),r=G(n),i=r.length,o=0,a=[];o<i;)Fa.call(n,e=r[o++])&&a.push(u?[e,n[e]]:n[e]);return a}},Ia=Na(!1);ee(ee.S,"Object",{values:function(t){return Ia(t)}});var ja=Na(!0);ee(ee.S,"Object",{entries:function(t){return ja(t)}});var Ca=!zt(function(){var t=Math.random();__defineSetter__.call(null,t,function(){}),delete Bt[t]});Kt&&ee(ee.P+Ca,"Object",{__defineGetter__:function(t,e){Jt.f(le(this),t,{get:l(e),enumerable:!0,configurable:!0})}}),Kt&&ee(ee.P+Ca,"Object",{__defineSetter__:function(t,e){Jt.f(le(this),t,{set:l(e),enumerable:!0,configurable:!0})}});var Va=ce.f;Kt&&ee(ee.P+Ca,"Object",{__lookupGetter__:function(t){var e,n=le(this),r=Ht(t,!0);do{if(e=Va(n,r))return e.get}while(n=fe(n))}});var Ra=ce.f;Kt&&ee(ee.P+Ca,"Object",{__lookupSetter__:function(t){var e,n=le(this),r=Ht(t,!0);do{if(e=Ra(n,r))return e.set}while(n=fe(n))}});var La=function(t,e){var n=[];return Ii(t,!1,n.push,n,e),n},Da=function(t){return function(){if(ge(this)!=t)throw TypeError(t+"#toJSON isn't generic");return La(this)}};ee(ee.P+ee.R,"Map",{toJSON:Da("Map")}),ee(ee.P+ee.R,"Set",{toJSON:Da("Set")});var Ga=function(t){ee(ee.S,t,{of:function(){for(var t=arguments.length,e=new Array(t);t--;)e[t]=arguments[t];return new this(e)}})};Ga("Map"),Ga("Set"),Ga("WeakMap"),Ga("WeakSet");var qa=function(t){ee(ee.S,t,{from:function(t){var e,n,r,i,o=arguments[1];return l(this),(e=void 0!==o)&&l(o),null==t?new this:(n=[],e?(r=0,i=te(o,arguments[2],2),Ii(t,!1,function(t){n.push(i(t,r++))})):Ii(t,!1,n.push,n),new this(n))}})};qa("Map"),qa("Set"),qa("WeakMap"),qa("WeakSet"),ee(ee.G,{global:Bt}),ee(ee.S,"System",{global:Bt}),ee(ee.S,"Error",{isError:function(t){return"Error"===T(t)}}),ee(ee.S,"Math",{clamp:function(t,e,n){return Math.min(n,Math.max(e,t))}}),ee(ee.S,"Math",{DEG_PER_RAD:Math.PI/180});var Ua=180/Math.PI;ee(ee.S,"Math",{degrees:function(t){return t*Ua}});var Xa=Math.scale||function(t,e,n,r,i){return 0===arguments.length||t!=t||e!=e||n!=n||r!=r||i!=i?NaN:t===1/0||t===-1/0?t:(t-e)*(i-r)/(n-e)+r};ee(ee.S,"Math",{fscale:function(t,e,n,r,i){return jn(Xa(t,e,n,r,i))}}),ee(ee.S,"Math",{iaddh:function(t,e,n,r){var i=t>>>0,o=n>>>0;return(e>>>0)+(r>>>0)+((i&o|(i|o)&~(i+o>>>0))>>>31)|0}}),ee(ee.S,"Math",{isubh:function(t,e,n,r){var i=t>>>0,o=n>>>0;return(e>>>0)-(r>>>0)-((~i&o|~(i^o)&i-o>>>0)>>>31)|0}}),ee(ee.S,"Math",{imulh:function(t,e){var n=+t,r=+e,i=65535&n,o=65535&r,a=n>>16,u=r>>16,s=(a*o>>>0)+(i*o>>>16);return a*u+(s>>16)+((i*u>>>0)+(65535&s)>>16)}}),ee(ee.S,"Math",{RAD_PER_DEG:180/Math.PI});var Ba=Math.PI/180;ee(ee.S,"Math",{radians:function(t){return t*Ba}}),ee(ee.S,"Math",{scale:Xa}),ee(ee.S,"Math",{umulh:function(t,e){var n=+t,r=+e,i=65535&n,o=65535&r,a=n>>>16,u=r>>>16,s=(a*o>>>0)+(i*o>>>16);return a*u+(s>>>16)+((i*u>>>0)+(65535&s)>>>16)}}),ee(ee.S,"Math",{signbit:function(t){return(t=+t)!=t?t:0==t?1/t==1/0:0<t}}),ee(ee.P+ee.R,"Promise",{finally:function(e){var n=Ci(this,d.Promise||Bt.Promise),t="function"==typeof e;return this.then(t?function(t){return so(n,e()).then(function(){return t})}:e,t?function(t){return so(n,e()).then(function(){throw t})}:e)}}),ee(ee.S,"Promise",{try:function(t){var e=io.f(this),n=oo(t);return(n.e?e.reject:e.resolve)(n.v),e.promise}});var Wa=f("metadata"),za=Wa.store||(Wa.store=new Ko),Ka=function(t,e,n){var r=za.get(t);if(!r){if(!n)return;za.set(t,r=new Ro)}var i=r.get(e);if(!i){if(!n)return;r.set(e,i=new Ro)}return i},Ya={store:za,map:Ka,has:function(t,e,n){var r=Ka(e,n,!1);return void 0!==r&&r.has(t)},get:function(t,e,n){var r=Ka(e,n,!1);return void 0===r?void 0:r.get(t)},set:function(t,e,n,r){Ka(n,r,!0).set(t,e)},keys:function(t,e){var n=Ka(t,e,!1),r=[];return n&&n.forEach(function(t,e){r.push(e)}),r},key:function(t){return void 0===t||"symbol"==typeof t?t:String(t)},exp:function(t){ee(ee.S,"Reflect",t)}},Ha=Ya.key,Ja=Ya.set;Ya.exp({defineMetadata:function(t,e,n,r){Ja(t,e,p(n),Ha(r))}});var $a=Ya.key,Za=Ya.map,Qa=Ya.store;Ya.exp({deleteMetadata:function(t,e){var n=arguments.length<3?void 0:$a(arguments[2]),r=Za(p(e),n,!1);if(void 0===r||!r.delete(t))return!1;if(r.size)return!0;var i=Qa.get(e);return i.delete(n),!!i.size||Qa.delete(e)}});var tu=Ya.has,eu=Ya.get,nu=Ya.key,ru=function(t,e,n){if(tu(t,e,n))return eu(t,e,n);var r=fe(e);return null!==r?ru(t,r,n):void 0};Ya.exp({getMetadata:function(t,e){return ru(t,p(e),arguments.length<3?void 0:nu(arguments[2]))}});var iu=Ya.keys,ou=Ya.key,au=function(t,e){var n=iu(t,e),r=fe(t);if(null===r)return n;var i=au(r,e);return i.length?n.length?La(new Lo(n.concat(i))):i:n};Ya.exp({getMetadataKeys:function(t){return au(p(t),arguments.length<2?void 0:ou(arguments[1]))}});var uu=Ya.get,su=Ya.key;Ya.exp({getOwnMetadata:function(t,e){return uu(t,p(e),arguments.length<3?void 0:su(arguments[2]))}});var cu=Ya.keys,lu=Ya.key;Ya.exp({getOwnMetadataKeys:function(t){return cu(p(t),arguments.length<2?void 0:lu(arguments[1]))}});var fu=Ya.has,hu=Ya.key,vu=function(t,e,n){if(fu(t,e,n))return!0;var r=fe(e);return null!==r&&vu(t,r,n)};Ya.exp({hasMetadata:function(t,e){return vu(t,p(e),arguments.length<3?void 0:hu(arguments[2]))}});var pu=Ya.has,du=Ya.key;Ya.exp({hasOwnMetadata:function(t,e){return pu(t,p(e),arguments.length<3?void 0:du(arguments[2]))}});var yu=Ya.key,gu=Ya.set;Ya.exp({metadata:function(n,r){return function(t,e){gu(n,r,(void 0!==e?p:l)(t),yu(e))}}});var mu=Zi(),wu=Bt.process,bu="process"==T(wu);ee(ee.G,{asap:function(t){var e=bu&&wu.domain;mu(e?e.bind(t):t)}});var _u=Zi(),xu=ne("observable"),ku=Ii.RETURN,Su=function(t){return null==t?void 0:l(t)},Tu=function(t){var e=t._c;e&&(t._c=void 0,e())},Au=function(t){return void 0===t._o},Eu=function(t){Au(t)||(t._o=void 0,Tu(t))},Mu=function(e,t){p(e),this._c=void 0,this._o=e,e=new Ou(this);try{var n=t(e),r=n;null!=n&&("function"==typeof n.unsubscribe?n=function(){r.unsubscribe()}:l(n),this._c=n)}catch(t){return void e.error(t)}Au(this)&&Tu(this)};Mu.prototype=co({},{unsubscribe:function(){Eu(this)}});var Ou=function(t){this._s=t};Ou.prototype=co({},{next:function(t){var e=this._s;if(!Au(e)){var n=e._o;try{var r=Su(n.next);if(r)return r.call(n,t)}catch(t){try{Eu(e)}finally{throw t}}}},error:function(t){var e=this._s;if(Au(e))throw t;var n=e._o;e._o=void 0;try{var r=Su(n.error);if(!r)throw t;t=r.call(n,t)}catch(t){try{Tu(e)}finally{throw t}}return Tu(e),t},complete:function(t){var e=this._s;if(!Au(e)){var n=e._o;e._o=void 0;try{var r=Su(n.complete);t=r?r.call(n,t):void 0}catch(t){try{Tu(e)}finally{throw t}}return Tu(e),t}}});var Pu=function(t){Ni(this,Pu,"Observable","_f")._f=l(t)};co(Pu.prototype,{subscribe:function(t){return new Mu(t,this._f)},forEach:function(r){var i=this;return new(d.Promise||Bt.Promise)(function(t,e){l(r);var n=i.subscribe({next:function(t){try{return r(t)}catch(t){e(t),n.unsubscribe()}},error:e,complete:t})})}}),co(Pu,{from:function(t){var e="function"==typeof this?this:Pu,n=Su(p(t)[xu]);if(n){var r=p(n.call(t));return r.constructor===e?r:new e(function(t){return r.subscribe(t)})}return new e(function(e){var n=!1;return _u(function(){if(!n){try{if(Ii(t,!1,function(t){if(e.next(t),n)return ku})===ku)return}catch(t){if(n)throw t;return void e.error(t)}e.complete()}}),function(){n=!0}})},of:function(){for(var t=0,e=arguments.length,r=new Array(e);t<e;)r[t]=arguments[t++];return new("function"==typeof this?this:Pu)(function(e){var n=!1;return _u(function(){if(!n){for(var t=0;t<r.length;++t)if(e.next(r[t]),n)return;e.complete()}}),function(){n=!0}})}}),Zt(Pu.prototype,xu,function(){return this}),ee(ee.G,{Observable:Pu}),li("Observable");var Fu=[].slice,Nu=/MSIE .\./.test(uo),Iu=function(i){return function(t,e){var n=2<arguments.length,r=!!n&&Fu.call(arguments,2);return i(n?function(){("function"==typeof t?t:Function(t)).apply(this,r)}:t,e)}};ee(ee.G+ee.B+ee.F*Nu,{setTimeout:Iu(Bt.setTimeout),setInterval:Iu(Bt.setInterval)}),ee(ee.G+ee.B,{setImmediate:zi.set,clearImmediate:zi.clear});for(var ju=ne("iterator"),Cu=ne("toStringTag"),Vu=Un.Array,Ru={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},Lu=G(Ru),Du=0;Du<Lu.length;Du++){var Gu,qu=Lu[Du],Uu=Ru[qu],Xu=Bt[qu],Bu=Xu&&Xu.prototype;if(Bu&&(Bu[ju]||Zt(Bu,ju,Vu),Bu[Cu]||Zt(Bu,Cu,qu),Un[qu]=Vu,Uu))for(Gu in hi)Bu[Gu]||w(Bu,Gu,hi[Gu],!0)}e(function(F){!function(t){var s,e=Object.prototype,c=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},i=n.iterator||"@@iterator",r=n.asyncIterator||"@@asyncIterator",o=n.toStringTag||"@@toStringTag",a=t.regeneratorRuntime;if(a)F.exports=a;else{(a=t.regeneratorRuntime=F.exports).wrap=m;var f="suspendedStart",h="suspendedYield",v="executing",p="completed",d={},u={};u[i]=function(){return this};var l=Object.getPrototypeOf,y=l&&l(l(O([])));y&&y!==e&&c.call(y,i)&&(u=y);var g=x.prototype=b.prototype=Object.create(u);_.prototype=g.constructor=x,x.constructor=_,x[o]=_.displayName="GeneratorFunction",a.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===_||"GeneratorFunction"===(e.displayName||e.name))},a.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,x):(t.__proto__=x,o in t||(t[o]="GeneratorFunction")),t.prototype=Object.create(g),t},a.awrap=function(t){return{__await:t}},k(S.prototype),S.prototype[r]=function(){return this},a.AsyncIterator=S,a.async=function(t,e,n,r){var i=new S(m(t,e,n,r));return a.isGeneratorFunction(e)?i:i.next().then(function(t){return t.done?t.value:i.next()})},k(g),g[o]="Generator",g[i]=function(){return this},g.toString=function(){return"[object Generator]"},a.keys=function(n){var r=[];for(var t in n)r.push(t);return r.reverse(),function t(){for(;r.length;){var e=r.pop();if(e in n)return t.value=e,t.done=!1,t}return t.done=!0,t}},a.values=O,M.prototype={constructor:M,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=s,this.done=!1,this.delegate=null,this.method="next",this.arg=s,this.tryEntries.forEach(E),!t)for(var e in this)"t"===e.charAt(0)&&c.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=s)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(n){if(this.done)throw n;var r=this;function t(t,e){return o.type="throw",o.arg=n,r.next=t,e&&(r.method="next",r.arg=s),!!e}for(var e=this.tryEntries.length-1;0<=e;--e){var i=this.tryEntries[e],o=i.completion;if("root"===i.tryLoc)return t("end");if(i.tryLoc<=this.prev){var a=c.call(i,"catchLoc"),u=c.call(i,"finallyLoc");if(a&&u){if(this.prev<i.catchLoc)return t(i.catchLoc,!0);if(this.prev<i.finallyLoc)return t(i.finallyLoc)}else if(a){if(this.prev<i.catchLoc)return t(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return t(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;0<=n;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&c.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var i=r;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=t,o.arg=e,i?(this.method="next",this.next=i.finallyLoc,d):this.complete(o)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),d},finish:function(t){for(var e=this.tryEntries.length-1;0<=e;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),E(n),d}},catch:function(t){for(var e=this.tryEntries.length-1;0<=e;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var i=r.arg;E(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:O(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=s),d}}}function m(t,e,n,r){var o,a,u,s,i=e&&e.prototype instanceof b?e:b,c=Object.create(i.prototype),l=new M(r||[]);return c._invoke=(o=t,a=n,u=l,s=f,function(t,e){if(s===v)throw new Error("Generator is already running");if(s===p){if("throw"===t)throw e;return P()}for(u.method=t,u.arg=e;;){var n=u.delegate;if(n){var r=T(n,u);if(r){if(r===d)continue;return r}}if("next"===u.method)u.sent=u._sent=u.arg;else if("throw"===u.method){if(s===f)throw s=p,u.arg;u.dispatchException(u.arg)}else"return"===u.method&&u.abrupt("return",u.arg);s=v;var i=w(o,a,u);if("normal"===i.type){if(s=u.done?p:h,i.arg===d)continue;return{value:i.arg,done:u.done}}"throw"===i.type&&(s=p,u.method="throw",u.arg=i.arg)}}),c}function w(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}function b(){}function _(){}function x(){}function k(t){["next","throw","return"].forEach(function(e){t[e]=function(t){return this._invoke(e,t)}})}function S(u){function s(t,e,n,r){var i=w(u[t],u,e);if("throw"!==i.type){var o=i.arg,a=o.value;return a&&"object"==typeof a&&c.call(a,"__await")?Promise.resolve(a.__await).then(function(t){s("next",t,n,r)},function(t){s("throw",t,n,r)}):Promise.resolve(a).then(function(t){o.value=t,n(o)},r)}r(i.arg)}var e;"object"==typeof t.process&&t.process.domain&&(s=t.process.domain.bind(s)),this._invoke=function(n,r){function t(){return new Promise(function(t,e){s(n,r,t,e)})}return e=e?e.then(t,t):t()}}function T(t,e){var n=t.iterator[e.method];if(n===s){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=s,T(t,e),"throw"===e.method))return d;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return d}var r=w(n,t.iterator,e.arg);if("throw"===r.type)return e.method="throw",e.arg=r.arg,e.delegate=null,d;var i=r.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=s),e.delegate=null,d):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,d)}function A(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function E(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function M(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(A,this),this.reset(!0)}function O(e){if(e){var t=e[i];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,r=function t(){for(;++n<e.length;)if(c.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=s,t.done=!0,t};return r.next=r}}return{next:P}}function P(){return{value:s,done:!0}}}("object"==typeof t?t:"object"==typeof window?window:"object"==typeof self?self:t)});var Wu,zu,Ku,Yu=(Wu=/[\\^$*+?.()|[\]{}]/g,Ku=(zu="\\$&")===Object(zu)?function(t){return zu[t]}:zu,function(t){return String(t).replace(Wu,Ku)});ee(ee.S,"RegExp",{escape:function(t){return Yu(t)}});d.RegExp.escape;if(t._babelPolyfill)throw new Error("only one instance of babel-polyfill is allowed");t._babelPolyfill=!0;function Hu(t,e,n){t[e]||Object.defineProperty(t,e,{writable:!0,configurable:!0,value:n})}Hu(String.prototype,"padLeft","".padStart),Hu(String.prototype,"padRight","".padEnd),"pop,reverse,shift,keys,values,entries,indexOf,every,some,forEach,map,filter,find,findIndex,includes,join,slice,concat,push,splice,unshift,sort,lastIndexOf,reduce,reduceRight,copyWithin,fill".split(",").forEach(function(t){[][t]&&Hu(Array,t,Function.call.bind([][t]))});var Ju=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},$u=function(){function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}}(),Zu=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)},Qu=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e},ts=function(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)};h.Context=void 0;try{h.Context=new(window.AudioContext||window.webkitAudioContext)}catch(t){alert("Your browser doesn't support the Web Audio API; audio functionality will be impaired."),console.warn("The browser does not support the Web Audio API; audio functionality will be impaired.")}function es(t){for(var e=0;e<t.length-1;e++)t[e].connect(t[e+1])}var ns=h.Context.createGain(),rs=h.Context.createGain(),is=h.Context.createAnalyser();es([ns,rs,h.Context.destination]),rs.connect(is);var os=h.Context.createChannelMerger(),as=h.Context.createGain();function us(t){rs.gain.value=t}as.gain.setValueAtTime(0,0),es([os,as,h.Context.destination]);var ss=void 0;var cs=function(){function r(t,e,n){Ju(this,r),this.node=t,this.time=e,this.node.onended=function(){n(),t.disconnect()},this.cancelled=!1}return $u(r,[{key:"ended",value:function(){return h.Context.currentTime>this.time||this.cancelled}},{key:"cancel",value:function(){this.node.onended=function(t){return null},this.node.stop(),this.node.disconnect(),this.cancelled=!0}}]),r}();function ls(t,e){var n=h.Context.createOscillator(),r=h.Context.currentTime;return n.start(r+e),n.stop(r+e),n.connect(h.Context.destination),new cs(n,r+e,t)}function fs(t,e){var n=h.Context.createOscillator();return n.start(e),n.stop(e),n.connect(h.Context.destination),new cs(n,e,t)}var hs=function(){function e(t){Ju(this,e),this.context=t||h.Context,this.entry=this.context.createGain(),this.exit=this.context.createGain()}return $u(e,[{key:"connect",value:function(t){return t instanceof e?this.exit.connect(t.entry):this.exit.connect(t),this}},{key:"disconnect",value:function(){return this.exit.disconnect(),this}},{key:"destroy",value:function(){this.disconnect()}},{key:"connectToMaster",value:function(){this.connect(ns)}}]),e}(),vs=function(){function e(t){Ju(this,e),this.context=t||h.Context,this.exit=this.context.createGain()}return $u(e,[{key:"connect",value:function(t){return t instanceof hs?this.exit.connect(t.entry):this.exit.connect(t),this}},{key:"disconnect",value:function(){return setTimeout(function(){this.exit.disconnect()},100),this}},{key:"destroy",value:function(){this.disconnect()}},{key:"connectToMaster",value:function(){this.connect(ns)}}]),e}(),ps=(function(){function e(t){Ju(this,e),this.context=t||h.Context,this.entry=this.context.createGain()}$u(e,[{key:"connectFrom",value:function(t){t.connect(this.entry)}}])}(),function(t){function n(t){Ju(this,n);var e=Qu(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,t.context));return e.panNode=h.Context.createStereoPanner(),e.gainNode=h.Context.createGain(),e.entryNode=h.Context.createGain(),es([e.entryNode,e.gainNode,e.panNode,e.exit]),t.destinationNode&&e.exit.connect(t.destinationNode),e.previousVolume=null,e}return Zu(n,vs),$u(n,[{key:"setVolume",value:function(t){this.volume=t}},{key:"mute",value:function(){this.previousVolume=this.volume,this.setVolume(0)}},{key:"unmute",value:function(){this.setVolume(this.volume)}},{key:"volume",set:function(t){this.gainNode.gain=t},get:function(){return this.gainNode.gain}}]),n}()),ds=function t(e,n){Ju(this,t),Array.isArray(e)?(this.x=e[0],this.y=e[1]):void 0!==n?(this.x=e,this.y=n):(this.x=e.x,this.y=e.y)},ys={none:function(t){return t},octaves:function(e){return function(t){return e*Math.pow(2,t)}},semitones:function(e){return function(t){return e*Math.pow(2,t/12)}},cents:function(e){return function(t){return e*Math.pow(2,t/1200)}},decibel_gain:function(t){return Math.pow(10,t/20)}},gs={none:function(t){return t},octaves:function(e){return function(t){return Math.log2(t/e)}},semitones:function(e){return function(t){return Math.log(t/e)/Math.log(1/12)}},cents:function(e){return function(t){return Math.log(t/e)/Math.log(1/1200)}},decibel_gain:function(t){return 20*Math.log10(t)}},ms={none:function(t){return t},currTimeOffset:function(t){return t+h.Context.currentTime},absoluteOffset:function(e){return function(t){return t+e}},offset:function(e){return function(t){return t+h.Context.currentTime+e}}},ws=function(){function i(t,e){if(Ju(this,i),(t=new ds(t))===(e=new ds(e)))throw new Error("Points cannot be the same.");var n=void 0,r=void 0;e.x<t.x?(n=e,r=t):(n=t,r=e),this.p1=n,this.p2=r}return $u(i,[{key:"minX",value:function(){return this.p1.x}},{key:"minY",value:function(){return Math.min(this.p1.y,this.p2.y)}},{key:"maxX",value:function(){return this.p2.x}},{key:"maxY",value:function(){return Math.max(this.p1.y,this.p2.y)}},{key:"contains",value:function(t){return this.minX()<=t&&t<=this.maxX()}},{key:"length",value:function(){return this.maxX()-this.minX()}}]),i}(),bs=function(t){function n(t,e){return Ju(this,n),Qu(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,t,e))}return Zu(n,ws),$u(n,[{key:"valueAt",value:function(t){return(t-this.p1.x)/(this.p2.x-this.p1.x)*(this.p2.y-this.p1.y)+this.p1.y}},{key:"sample",value:function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:this.minX(),n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:this.maxX(),r=new Float32Array(t),i=n-e;if(0===i){for(var o=this.p2.y-this.p1.y,a=0;a<t;a++)r[a]=a/(t-1)*o+this.p1.y;return r}for(var u=0;u<t;u++)r[u]=this.valueAt(u/(t-1)*i+e);return r}},{key:"samplePoints",value:function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:this.minX(),n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:this.maxX(),r=new Float32Array(2*t),i=n-e;if(0===i){for(var o=this.p2.y-this.p1.y,a=0;a<t;a++)r[2*a]=this.minX(),r[2*a+1]=a/(t-1)*o+this.p1.y;return r}for(var u=0;u<t;u++){var s=u/(t-1)*i+e;r[2*u]=s,r[2*u+1]=this.valueAt(s)}return r}},{key:"segmentApproximation",value:function(){return new Float32Array([this.p1.x,this.p1.y,this.p2.x,this.p2.y])}}],[{key:"_segApproxArrayLength",value:function(){return 4}}]),n}();function _s(t,e){return Math.min(2*Math.ceil(Math.max(1/(1.51-t-Math.abs(e-.5)),2+5*t)),75)}var xs=function(t){function i(t,e,n){Ju(this,i);var r=Qu(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,t,e));if(n<=r.minY()||n>=r.maxY())throw new Error("Intermediate y value must be between point y values");return r._inter_y=n||(r.p1.y+r.p2.y)/2,r}return Zu(i,ws),$u(i,[{key:"valid",value:function(){return inter_y>this.minY()&&inter_y<this.maxY()}},{key:"valueAt",value:function(t){var e=this.p2.x-this.p1.x,n=this.p2.y-this.p1.y,r=(this.inter_y-this.p1.y)/n,i=(1-r)/r;return 1-1e-6<i&&i<1+1e-6?n*(t-this.p1.x)/e+this.p1.y:n*(Math.pow(i,2*(t-this.p1.x)/e)-1)/(i*i-1)+this.p1.y}},{key:"sample",value:function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:this.minX(),n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:this.maxX(),r=new Float32Array(t),i=n-e;if(0===i){for(var o=this.p2.y-this.p1.y,a=0;a<t;a++)r[a]=a/(t-1)*o+this.p1.y;return r}for(var u=0;u<t;u++)r[u]=this.valueAt(u/(t-1)*i+e);return r}},{key:"samplePoints",value:function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:this.minX(),n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:this.maxX(),r=new Float32Array(2*t),i=n-e;if(0===i){for(var o=this.p2.y-this.p1.y,a=0;a<t;a++)r[2*a]=this.minX(),r[2*a+1]=a/(t-1)*o+this.p1.y;return r}for(var u=0;u<t;u++){var s=u/(t-1)*i+e;r[2*u]=s,r[2*u+1]=this.valueAt(s)}return r}},{key:"segmentApproximation",value:function(){var t=this,e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:.95,n=this.p2.y-this.p1.y,r=(this.inter_y-this.p1.y)/n,i=(1-r)/r;if(1-1e-6<i&&i<1+1e-6)return new Float32Array([this.p1.x,this.p1.y,this.p2.x,this.p2.y]);for(var o,a=_s(e,r),u=new Float32Array(2*a),s=i*i,c=Math.log(s),l=Math.atan(c/(s-1)),f=Math.atan(s*c/(s-1))-l,h=this.p2.x-this.p1.x,v=0;v<a;v++){var p=Math.tan(v/(a-1)*f+l);u[2*v]=(o=p,Math.log(o*(s-1)/c)/c*h+this.p1.x),u[2*v+1]=n*(p*(s-1)/c-1)/(s-1)+t.p1.y}return u}},{key:"_segApproxArrayLength",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:.95,e=(this.inter_y-this.p1.y)/(this.p2.y-this.p1.y),n=(1-e)/e;return 1-1e-6<n&&n<1+1e-6?4:2*_s(t,e)}},{key:"inter_y",get:function(){return this._inter_y},set:function(t){if(t<this.minY()||t>this.maxY())throw new Error("Intermediate y value must be between point y values")}}]),i}(),ks=function(t){function i(t,e,n){Ju(this,i),n=new ds(n);var r=Qu(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,t,e));return r._inter_point=n||new ds([(t.x+e.x)/2,(t.y+e.y)/2]),r}return Zu(i,ws),i}();var Ss=function(){function o(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:ys.none;if(Ju(this,o),!Array.isArray(t))throw new Error("Array of segments must be passed to Envelope constructor.");if(t.length<1)throw new Error("Not enough segments passed to Envelope constructor.");this.segments=[];for(var n=0;n<t.length;n++){if(0!==n){var r=t[n-1].maxX(),i=t[n].minX();if(i<r)throw new Error("Intersecting or invalid segments at indices "+String(n-1)+", "+String(n));r<i&&this.segments.push(new bs(t[n-1].p2,[t[n].p1.x,t[n-1].p2.y]))}this.segments.push(t[n])}this.vTransform=e}return $u(o,[{key:"minX",value:function(){return this.segments[0].minX()}},{key:"maxX",value:function(){return this.segments[this.segments.length-1].maxX()}},{key:"minY",value:function(){return Math.min.apply(Math,ts(this.segments.apply(function(t){return t.p1.y})).concat(ts(this.segments.apply(function(t){return t.p2.y}))))}},{key:"maxY",value:function(){return Math.max.apply(Math,ts(this.segments.apply(function(t){return t.p1.y})).concat(ts(this.segments.apply(function(t){return t.p2.y}))))}},{key:"addSegment",value:function(t){var e=t.minX(),n=this.maxX();if(e===n)this.segments.push(t);else{if(!(n<e))throw new Error("Discontinuous segment.");this.segments.push(new ws(this.segments[this.segments.length-1].p2,t.p1))}}},{key:"valueAt",value:function(t){if(t<this.minX())return this.valueAt(this.minX());if(t>this.maxX())return this.valueAt(this.maxX());for(var e=0;e<this.segments.length;e++){var n=this.segments[e];if(n.minX()<=t&&n.maxX()>=t)return n.valueAt(t)}}},{key:"sample",value:function(t){for(var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:this.minX(),n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:this.maxX(),r=new Float32Array(t),i=n-e,o=0;o<t;o++)r[o]=this.valueAt(o/(t-1)*i+e);return r.map(this.vTransform)}},{key:"samplePoints",value:function(t){for(var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:this.minX(),n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:this.maxX(),r=new Float32Array(2*t),i=n-e,o=0;o<t;o++){var a=o/(t-1)*i+e;r[2*o]=a,r[2*o+1]=this.valueAt(a)}return function(t,e){for(var n=0;n<t.length/2;n++)t[2*n+1]=e(t[2*n+1]);return t}(r,this.vTransform)}},{key:"segmentApproximation",value:function(){for(var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:.95,e=0,n=0;n<this.segments.length;n++)e+=this.segments[n]._segApproxArrayLength(t);for(var r=new Float32Array(e),i=0,o=0;o<this.segments.length;o++){var a=this.segments[o].segmentApproximation(t);r.set(a,i),i+=a.length}return function(t,e){for(var n=0;n<t.length/2;n++)t[2*n+1]=e(t[2*n+1]);return t}(r,this.vTransform)}},{key:"smartSample",value:function(){for(var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:.1,e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:3,n=0,r=0;r<this.segments.length;r++){var i=this.segments[r];n+=Math.max(Math.ceil(i.length()/t),3)}for(var o=new Float32Array(2*n),a=0,u=0;u<this.segments.length;u++){for(var s=this.segments[u],c=s.samplePoints(Math.max(Math.ceil(s.length()/t),e)),l=0;l<c.length/2;l++)c[2*l+1]=this.vTransform(c[2*l+1]);o.set(c,a),a+=c.length}return o}},{key:"apply",value:function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:ms.currTimeOffset,n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:.1,r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:3;Ts(this.smartSample(n,r),t,e)}}]),o}();function Ts(t,e){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:ms.currTimeOffset,r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:ys.none,i=n(t[0]),o=r(t[1]);e.setValueAtTime(o,i);for(var a=0;a<t.length/2;a++){var u=n(t[2*a]),s=r(t[2*a+1]);i===u?e.setValueAtTime(s,u):e.linearRampToValueAtTime(s,u),i=u,o=s}}function As(t,e,n,r){return n<t?(console.warn("Value "+r+" outside nominal range ["+e+", "+n+"]; value will be clamped."),n):t<e?(console.warn("Value "+r+" outside nominal range ["+e+", "+n+"]; value will be clamped."),e):t}function Es(t){return!!t.toFixed}var Ms=function(){function r(t,e){var n=this;Ju(this,r),this.timeout=setTimeout(function(){n._ended=!0,t()},1e3*e),this._ended=!1}return $u(r,[{key:"cancel",value:function(){clearTimeout(this.timeout),this._ended=!0}},{key:"ended",value:function(){return this._ended}}]),r}(),Os=Es,Ps=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"];function Fs(t){return Ps[(e=t,n=12,(e%n+n)%n)]+String(parseInt(t/12)-1);var e,n}var Ns={C:0,D:2,E:4,F:5,G:7,A:9,B:11},Is={"#":1,"##":2,B:-1,BB:-2,b:-1,bb:-2,s:1,ss:2};function js(t){var e=/^([ABCDEFG])(#|##|B|BB|S|SS)?(-)?([0-9]+)$/.exec(t.toUpperCase().trim());try{return Ns[e[1]]+(e[2]?Is[e[2]]:0)+(e[3]?-12:12)*parseInt(e[4])+12}catch(t){throw new Error("Invalid note")}}var Cs=["A","AUG","AUGMENTED"],Vs=["D","DIM","DIMIN","DIMINISHED"],Rs=["P","PERF","PERFECT"];function Ls(t){var e=(t=t.trim()).toUpperCase();if("TT"===e||"tritone"===e)return qs.tritone;if("unison"===e)return qs.unison;if("octave"===e)return qs.octave;var n=/^([A-Za-z]+)\s*([A-Za-z0-9]+)$/.exec(t);if(!n)throw new Error("Invalid interval.");var r=function(t){if("m"===(t=t.trim())[0]||"M"===t[0]){var e=t.toUpperCase();if(e.includes("MIN"))return"min";if(e.includes("MAJ"))return"maj";if("m"===t[0]&&1===t.length)return"min";if("M"===t[0]&&1===t.length)return"maj";throw new Error("Invalid interval")}var n=t.toUpperCase();if(Cs.includes(n))return"aug";if(Vs.includes(n))return"dim";if(Rs.includes(n))return"perf";throw new Error("Invalid interval")}(n[1]),i=function(t){switch(t){case"one":case"first":case"1st":case"unison":return 1;case"two":case"second":case"2nd":return 2;case"three":case"third":case"3rd":return 3;case"four":case"fourth":return 4;case"five":case"fifth":return 5;case"six":case"sixth":return 6;case"seven":case"seventh":return 7;case"eight":case"eighth":case"octave":return 8;case"nine":case"ninth":return 9;case"ten":case"tenth":return 10;case"eleven":case"eleventh":return 11;case"twelve":case"twelfth":return 12;case"thirteen":case"thirteenth":return 13;case"fourteen":case"fourteenth":return 14;case"fifteen":case"fifteenth":return 15;case"sixteen":case"sixteenth":return 16;case"seventeen":case"seventeenth":return 17;case"eighteen":case"eighteenth":return 18;case"nineteen":case"nineteenth":return 19;case"twenty":case"twentieth":return 20}var e=/^([0-9]+)(th|)?$/.exec(t);return e?parseInt(e[1]):null}(n[2]);if(!Os(i)||!r||!i)throw new Error("Invalid interval.");var o=i%7,a=parseInt(i/7);if([4,5,1].includes(i%7)){switch(i=12*a,o){case 4:i+=5;break;case 5:i+=7}switch(r){case"dim":return new Ws(i-1);case"aug":return new Ws(i+1);case"perf":return new Ws(i);default:case"min":case"maj":throw new Error("Invalid interval.")}}else{switch(i=12*a,o){case 0:i+=11;break;case 2:i+=2;break;case 3:i+=4;break;case 6:i+=9}switch(r){case"dim":return new Ws(i-2);case"aug":return new Ws(i+1);case"min":return new Ws(i-1);case"maj":return new Ws(i);default:case"perf":throw new Error("Invalid interval.")}}}var Ds=[["P",1],["m",2],["M",2],["m",3],["M",3],["P",4],["A",4],["P",5],["m",6],["M",6],["m",7],["M",7]];function Gs(t){var e=t%12,n=parseInt(t/12),r=Ds[e],i=7*n+r[1];return r[0]+String(i)}var qs={unison:0,minor_second:1,major_second:2,minor_third:3,major_third:4,perfect_fourth:5,tritone:6,perfect_fifth:7,minor_sixth:8,major_sixth:9,minor_seventh:10,major_seventh:11,octave:12};function Us(t){return t instanceof Bs}function Xs(t){return t instanceof Ws}var Bs=function(){function e(t){Ju(this,e),Os(t)?this.value=t:Us(t)?this.value=t.value:this.value=js(t)}return $u(e,[{key:"subtract",value:function(t){return Us(t)||Os(t)?new Ws(this.value-new e(t).value):Xs(t)?new e(this.value-t.value):void 0}},{key:"add",value:function(t){return new e(this.value+t.value)}},{key:"name",value:function(){return Fs(this.value)}},{key:"twelveTETFrequency",value:function(){return 440*Math.pow(2,(this.value-69)/12)}}]),e}();var Ws=function(){function n(t,e){Ju(this,n),Os(t)&&void 0===e?this.value=t:void 0!==e?this.value=new Bs(e).subtract(new Bs(t)).value:Xs(t)?this.value=t.value:"string"==typeof t&&(this.value=Ls(t).value)}return $u(n,[{key:"add",value:function(t){return new n(this.value+new n(t).value)}},{key:"subtract",value:function(t){return new n(this.value-new n(t).value)}},{key:"negate",value:function(){return new n(-this.value)}},{key:"cents",value:function(){return 100*this.value}},{key:"ratio",value:function(){return Math.pow(2,this.value/12)}},{key:"name",value:function(){return Gs(this.value)}}]),n}();for(var zs in qs)qs[zs]=new Ws(qs[zs]);Object.freeze(qs);for(var Ks={},Ys=12;Ys<128;Ys++){var Hs=new Bs(Ys);Ks[Hs.name().replace("#","s")]=Hs}var Js=function(){function r(t,e){var n=this;Ju(this,r),this.keydict=t,this.func=e,this.enabled=!1,this.keyPress=function(t){try{n.func(n.keydict[t.key],!0)}catch(t){console.log(t)}},this.keyUp=function(t){try{n.func(n.keydict[t.key],!1)}catch(t){console.log(t)}}}return $u(r,[{key:"enable",value:function(){this.enabled||(document.addEventListener("keypress",this.keyPress),document.addEventListener("keyup",this.keyUp),this.enabled=!0)}},{key:"disable",value:function(){this.enabled&&(document.removeEventListener("keypress",this.keyPress),document.removeEventListener("keyup",this.keyUp),this.enabled=!1)}},{key:"dictApply",value:function(t){for(var e in this.keydict)this.keydict[e]=t(this.keydict[e])}},{key:"transform",value:function(t){return this.keydict[t]}},{key:"virtualPress",value:function(t){this.func(this.keydict[t],!0)}},{key:"virtualRelease",value:function(t){this.func(this.keydict[t],!1)}}]),r}(),$s=Ks,Zs={z:$s.C3,s:$s.Cs3,x:$s.D3,d:$s.Ds3,c:$s.E3,v:$s.F3,g:$s.Fs3,b:$s.G3,h:$s.Gs3,n:$s.A3,j:$s.As3,m:$s.B3,",":$s.C4,l:$s.Cs4,".":$s.D4,";":$s.Ds4,"/":$s.E4,q:$s.C4,2:$s.Cs4,w:$s.D4,3:$s.Ds4,e:$s.E4,r:$s.F4,5:$s.Fs4,t:$s.G4,6:$s.Gs4,y:$s.A4,7:$s.As4,u:$s.B4,i:$s.C5,9:$s.Cs5,o:$s.D5,0:$s.Ds5,p:$s.E5,"[":$s.F5,"=":$s.Fs5,"]":$s.G5};function Qs(){return Object.assign({},Zs)}var tc=function(){function e(t){Ju(this,e),t.Hz?this.value=t.value:this.value=t instanceof Bs?t.twelveTETFrequency():t}return $u(e,[{key:"Hz",value:function(){return this.value}},{key:"period",value:function(){return 1/this.value}},{key:"add",value:function(t){return new e(this.value*t.ratio())}},{key:"subtract",value:function(t){return t.ratio?new e(this.value/interval.ratio()):new nc(t.value/this.value)}}]),e}();var ec={cents:1.0005777895065548,schismas:1.001129150390625,semitones:1.0594630943592953,tones:1.122462048309373,tritones:1.4142135623730951,octaves:2,millioctaves:1.0006933874625807,savarts:1.0023052380778996,decades:10,merides:1.0162486928706955,heptamerides:1.0023052380778996,demiheptamerides:1.001151955538169,decamerides:1.0002302850208247,jots:1.0000230261160268,syntonic_commas:81/80,pythagorean_commas:531441/524288};var nc=function(){function r(t,e){var n;Ju(this,r),t&&e?(t=new tc(t),e=new tc(e),this.value=e.Hz()/t.Hz()):t&&(n=t,!isNaN(parseFloat(n))&&isFinite(n)?this.value=t:t.ratio?this.value=t.value:this.value=t instanceof Ws?t.ratio():function(t){var e=new nc(1);for(var n in ec)t[n]&&(e=e.add(ec[n].stack(t[n])));return e}(t).value)}return $u(r,[{key:"reverse",value:function(){return new r(1/this.value)}},{key:"subtract",value:function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1;return new r(this.value/t.stack(e).value)}},{key:"add",value:function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1;return new r(this.value*t.stack(e).value)}},{key:"divideByInterval",value:function(t){return Math.log(this.value,t.value)}},{key:"divide",value:function(t){return new r(Math.pow(this.value,1/t))}},{key:"stack",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:1;return new r(Math.pow(this.value,t))}},{key:"ratio",value:function(){return this.value}}]),r}();for(var rc in ec)ec[rc]=new nc(ec[rc]);for(var ic=function(){function r(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:function(t){return t},n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:function(t){return t};Ju(this,r),this.dict=t,this.pitchMap=e,this.kPitchMap=n}return $u(r,[{key:"transform",value:function(t){return this.pitchMap(this.dict[this.kPitchMap(t.value)])}},{key:"dictApply",value:function(t){for(var e in this.dict)this.keydict[e]=t(this.keydict[e])}}]),r}(),oc={},ac=0;ac<128;ac++)oc[ac]=new Bs(ac).twelveTETFrequency();var uc={ET12:new ic(oc)};function sc(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:Tones.KeyboardPitches.C4,n=arguments[2],r=(t=t.map(function(t){return new nc(t)})).length,i=t[r-1];n=new tc(n||e.twelveTETFrequency());for(var o={},a=Math.ceil((e.value+1)/r),u=e.value-a*r,s=-a;u<129;u+=r,s++)for(var c=u+1,l=0;l<r;c++,l++)o[c]=n.add(t[l]).add(i.stack(s)).Hz();return new ic(o)}var cc=function(){function e(t){Ju(this,e),this.gain=h.Context.createGain(),this.pan=h.Context.createStereoPanner(),this.parent=t}return $u(e,[{key:"_connect",value:function(t){this.pan.connect(t)}},{key:"_disconnect",value:function(){this.pan.disconnect()}}]),e}(),lc=function(t){function r(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};Ju(this,r);var e=Qu(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,t));e.pitch_mapping=t.pitch_mapping||uc.ET12,e.note_states=Array(128);for(var n=0;n<128;n++)e.note_states[n]={future_nodes:[],active_node:null};return e.internal_timeouts=[],e._timeout_interval=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1e3;setInterval(function(){for(var t=0;t<e.length;t++)e[t].ended()&&(e.splice(t,1),t--)},t)}(e.internal_timeouts),e}return Zu(r,ps),$u(r,[{key:"frequencyOf",value:function(t){return this.pitch_mapping.transform(t)}},{key:"getNoteState",value:function(t){return this.note_states[t]}},{key:"getActiveNote",value:function(t){return this.note_states[t].active_node}},{key:"hasEventsScheduled",value:function(t){var e=this.getNoteState(t);return!(0===e.future_nodes.length&&!e.active_node)}},{key:"predictNoteState",value:function(t){if(!this.hasEventsScheduled(t))return{future_nodes:[],active_node:null};for(var e=this.getNoteState(t),n=0;n<e.future_nodes.length;n++)e[n]}},{key:"_addInternalTimeout",value:function(t){this.internal_timeouts.push(t)}},{key:"setActiveNodeFromFuture",value:function(t,e){var n=this.getNoteState(t);n.active_node&&n.active_node.node._release();var r=n.future_nodes.indexOf(e);n.active_node=n.future_nodes.splice(r,1)[0]}},{key:"setLongActiveNode",value:function(t,e){var n=this.getNoteState(t);n.active_node&&n.active_node.node._release(),n.active_node={node:e,start:h.Context.currentTime,end:1e10}}},{key:"schedule",value:function(t){var e=this,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:300,r=arguments[2];if(t.start<h.Context.currentTime)return null;if(n||(n=5e3),t.start>h.Context.currentTime+n/1e3+.001){var i=null;if(t.start>h.Context.currentTime+3*n/1e3)var o=new Ms(function(){e.schedule(t,n,function(t){i=t})},t.start-3*n/1e3-h.Context.currentTime);else o=fs(function(){e.schedule(t,n,function(t){i=t})},t.start-n/1e3);return this._addInternalTimeout(o),{cancel:function(){o.cancel(),i&&i.cancel()}}}var a=this.pitch_mapping.transform(t.pitch),u=this.getNoteState(t.pitch.value),s=this.createNode(a,t.start,t.end,t.vel,t.pan),c={node:s,start:t.start,end:t.end};u.future_nodes.push(c),this._addInternalTimeout(fs(function(){e.setActiveNodeFromFuture(t.pitch.value,c)},t.start)),s._connect(this.entryNode);var l={cancel:function(){s._destroy()}};return r&&r(l),l}},{key:"playPitch",value:function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1,n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,r=this.createNode(this.pitch_mapping.transform(t),h.Context.currentTime,1e10,e,n);r._connect(this.entryNode),this.setLongActiveNode(t.value,r)}},{key:"releasePitch",value:function(t){var e=this.getActiveNote(t.value);e&&e.node._release()}},{key:"cancelAll",value:function(){for(var t=0;t<this.internal_timeouts.length;t++)this.internal_timeouts[t].cancel();for(var e=0;e<this.note_states.length;e++){var n=this.note_states[e];n.active_note&&n.active_note.node._destroy(),n.active_note=null;for(var r=0;r<n.future_nodes.length;r++)n.future_nodes[r].node._destroy();n.future_nodes=[]}}},{key:"releaseAll",value:function(){for(var t=0;t<128;t++)try{releasePitch(t)}catch(t){}}},{key:"createNode",value:function(t,e,n,r,i){var o=h.Context.createOscillator();return o.frequency.value=t,o.start(e),o.stop(n),{node:o,_connect:function(t){return o.connect(t)},_disconnect:function(){return o.disconnect()},_release:function(){return o.stop()},_cancel:function(){return o.stop()},_destroy:function(){return o.disconnect()},_timeAfterRelease:function(){return 0}}}},{key:"iterateOverNodes",value:function(t){for(var e=0;e<this.note_states.length;e++){var n=this.note_states[e];n.active_node&&t(n.active_node);for(var r=0;r<n.future_nodes.length;r++)t(n.future_nodes[r])}}},{key:"setPitchMapping",value:function(t){this.pitch_mapping=t instanceof ic?t:new ic(t)}},{key:"destroy",value:function(){this.cancelAll(),clearInterval(this._timeout_interval),this.enableKeyboardPlay=!1}}]),r}(),fc=function(t){function r(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};Ju(this,r);var n=Qu(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,t));n.keyboard={};for(var e=0;e<128;e++)n.keyboard[e]=!1;return n.keyboard_mapping=new Js(t.keyboard_dict||Qs(),function(t,e){t&&(e?n.play(t):n.release(t))}),n}return Zu(r,lc),$u(r,[{key:"play",value:function(t){t=new Bs(t),this.keyboard[t.value]||(this.keyboard[t.value]=!0,this.playPitch(t))}},{key:"release",value:function(t){t=new Bs(t),this.keyboard[t.value]&&(this.keyboard[t.value]=!1,this.releasePitch(t))}},{key:"enableKeyboardPlay",value:function(){this.keyboard_mapping.enable()}},{key:"disableKeyboardPlay",value:function(){this.keyboard_mapping.disable(),this.releaseAll()}},{key:"keyboardPlayEnabled",get:function(){return this.keyboard_mapping.enabled},set:function(t){t?enableKeyboardPlay():disableKeybordPlay()}}]),r}(),hc=-22050,vc=22050;function pc(t){return 0===t?0:0<t&&t<=1?t-1:t+1}var dc=function(t){function f(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};Ju(this,f);var y=Qu(this,(f.__proto__||Object.getPrototypeOf(f)).call(this,t.context));y._frequency=As(t.frequency||440,hc,vc,"frequency"),y._detune=As(0===t.detune?0:t.detune||20,0,200,"detune"),y._unison_obj={value:As(t.unison||4,2,16)},Object.freeze(y._unison_obj),y._blend=As(0===t.blend?0:t.blend||.5,0,1,"blend"),y._type=t.type||"triangle",y._context=h.Context,y.oscillators=[];var g=y.unison;if(g%2==0){var e=y._blend,n=1-y._blend,r=2*e+(g-2)*n;y.exit.gain.value=1/r;for(var i=0;i<g;i++){var o={d:(i-g/2+.5)/(g-1),o:h.Context.createOscillator(),g:h.Context.createGain(),delay:h.Context.createDelay(),pan:h.Context.createStereoPanner()};o.o.frequency.setValueAtTime(y._frequency,0),o.o.detune.setValueAtTime(o.d*y._detune,0),o.o.type=y._type,o.delay.delayTime.setValueAtTime(1/y._frequency*Math.random(),0),2===g?o.pan.pan.setValueAtTime(2*o.d,0):o.pan.pan.setValueAtTime(pc(2*o.d),0),i===g/2-1||i===g/2||2===g?o.g.gain.setValueAtTime(e,0):o.g.gain.setValueAtTime(n,0),es([o.o,o.delay,o.g,o.pan,y.exit]),y.oscillators.push(o)}}else{var a=y._blend,u=1-y._blend,s=a+(g-1)*u;y.exit.gain.value=1/s;for(var c=0;c<g;c++){var l={d:(c-g/2+.5)/(g-1),o:h.Context.createOscillator(),g:h.Context.createGain(),delay:h.Context.createDelay(),pan:h.Context.createStereoPanner()};l.o.frequency.setValueAtTime(y._frequency,0),l.o.detune.setValueAtTime(l.d*y._detune,0),l.o.type=y._type,l.delay.delayTime.setValueAtTime(1/y._frequency*Math.random(),0),3===g?l.pan.pan.setValueAtTime(2*l.d,0):l.pan.pan.setValueAtTime(pc(2*l.d),0),c===(g-1)/2?l.g.gain.setValueAtTime(a,0):l.g.gain.setValueAtTime(u,0),es([l.o,l.delay,l.g,l.pan,y.exit]),y.oscillators.push(l)}}y.channelCount=2,y.channelCountMode="max",y.channelInterpretation="speakers";var m=y;return y.frequency={setValueAtTime:function(t,e){t=As(t,hc,vc,"frequency");for(var n=0;n<y.unison;n++)y.oscillators[n].o.frequency.setValueAtTime(t,e)},linearRampToValueAtTime:function(t,e){t=As(t,hc,vc,"frequency");for(var n=0;n<y.unison;n++)y.oscillators[n].o.frequency.linearRampToValueAtTime(t,e)},exponentialRampToValueAtTime:function(t,e){t=As(t,hc,vc,"frequency");for(var n=0;n<y.unison;n++)y.oscillators[n].o.frequency.exponentialRampToValueAtTime(t,e)},setTargetAtTime:function(t,e,n){t=As(t,hc,vc,"frequency");for(var r=0;r<y.unison;r++)y.oscillators[r].o.frequency.setTargetAtTime(t,e,n)},setValueCurveAtTime:function(t,e,n){for(var r=0;r<t.length;r++)t[r]=As(t[r],hc,vc,"frequency");for(var i=0;i<y.unison;i++)y.oscillators[i].o.frequency.setValueCurveAtTime(t,e,n)},cancelScheduledValues:function(){for(var t=0;t<y.unison;t++)y.oscillators[t].o.frequency.cancelScheduledValues()},get value(){return m.oscillators[0].o.frequency.value},set value(t){t=As(t,hc,vc,"frequency");for(var e=0;e<m.unison;e++)m.oscillators[e].o.frequency.value=t}},Object.defineProperties(y.frequency,{minValue:{value:hc,writable:!1},maxValue:{value:vc,writable:!1},defaultValue:{value:440,writable:!1}}),y.detune={setValueAtTime:function(t,e){t=As(t,0,m.detune.maxValue,"detune");for(var n=0;n<y.unison;n++){var r=y.oscillators[n];r.o.detune.setValueAtTime(r.d*t,e)}},linearRampToValueAtTime:function(t,e){t=As(t,0,m.detune.maxValue,"detune");for(var n=0;n<y.unison;n++){var r=y.oscillators[n];r.o.detune.linearRampToValueAtTime(r.d*t,e)}},exponentialRampToValueAtTime:function(t,e){t=As(t,0,m.detune.maxValue,"detune");for(var n=0;n<y.unison;n++){var r=y.oscillators[n];r.o.detune.exponentialRampToValueAtTime(r.d*t,e)}},setTargetAtTime:function(t,e,n){t=As(t,0,m.detune.maxValue,"detune");for(var r=0;r<y.unison;r++){var i=y.oscillators[r];i.o.detune.setTargetAtTime(i.d*t,e,n)}},setValueCurveAtTime:function(t,e,n){for(var r=0;r<t.length;r++)t[r]=As(t[r],0,m.detune.maxValue,"detune");for(var i=0;i<y.unison;i++){for(var o=y.oscillators[i],a=t.slice(),u=0;u<a.length;u++)a[u]=o.d*a[u];o.o.detune.setValueCurveAtTime(a,e,n)}},cancelScheduledValues:function(){for(var t=0;t<y.unison;t++)y.oscillators[t].o.detune.cancelScheduledValues()},get value(){return m.oscillators[0].o.detune.value/m.oscillators[0].d},set value(t){t=As(t,0,m.detune.maxValue,"detune");for(var e=0;e<m.unison;e++){var n=m.oscillators[e];n.o.detune.value=n.d*t}}},Object.defineProperties(y.detune,{minValue:{value:0,writable:!1},maxValue:{value:200,writable:!1},defaultValue:{value:50,writable:!1}}),y.blend={get value(){return m.unison%2==0?m.oscillators[m.unison/2].g.gain.value:m.oscillators[(m.unison-1)/2].g.gain.value},set value(t){if(t=As(t,0,1,"blend"),m.unison%2==0){var e=t,n=1-t,r=2*e+(g-2)*n;m.exit.gain.value=1/r;for(var i=0;i<m.unison;i++){var o=m.oscillators[i];o.g.gain.value=i===g/2-1||i===g/2||2===g?e:n}}else{var a=t,u=1-t,s=a+(g-1)*u;m.exit.gain.value=1/s;for(var c=0;c<m.unison;c++){var l=m.oscillators[c];c===(g-1)/2?l.g.gain.setValueAtTime(a,0):l.g.gain.setValueAtTime(u,0)}}},setValueAtTime:function(t,e){if(t=As(t,0,1,"blend"),m.unison%2==0){var n=t,r=1-t,i=2*n+(g-2)*r;m.exit.gain.setValueAtTime(1/i,e);for(var o=0;o<m.unison;o++){var a=m.oscillators[o];o===g/2-1||o===g/2||2===g?a.g.gain.setValueAtTime(n,e):a.g.gain.setValueAtTime(r,e)}}else{var u=t,s=1-t,c=u+(g-1)*s;m.exit.gain.setValueAtTime(1/c,e);for(var l=0;l<m.unison;l++){var f=m.oscillators[l];l===(g-1)/2?f.g.gain.setValueAtTime(u,e):f.g.gain.setValueAtTime(s,e)}}},linearRampToValueAtTime:function(t,e){if(t=As(t,0,1,"blend"),m.unison%2==0){var n=t,r=1-t,i=2*n+(g-2)*r;m.exit.gain.linearRampToValueAtTime(1/i,e);for(var o=0;o<m.unison;o++){var a=m.oscillators[o];o===g/2-1||o===g/2||2===g?a.g.gain.linearRampToValueAtTime(n,e):a.g.gain.linearRampToValueAtTime(r,e)}}else{var u=t,s=1-t,c=u+(g-1)*s;m.exit.gain.linearRampToValueAtTime(1/c,e);for(var l=0;l<m.unison;l++){var f=m.oscillators[l];l===(g-1)/2?f.g.gain.linearRampToValueAtTime(u,e):f.g.gain.linearRampToValueAtTime(s,e)}}},exponentialRampToValueAtTime:function(t,e){if(console.warn("exponentialRampToValueAtTime for UnisonOscillator.blend does not work well."),t=As(t,0,1,"blend"),m.unison%2==0){var n=t,r=1-t,i=2*n+(g-2)*r;m.exit.gain.exponentialRampToValueAtTime(1/i,e);for(var o=0;o<m.unison;o++){var a=m.oscillators[o];o===g/2-1||o===g/2||2===g?a.g.gain.exponentialRampToValueAtTime(n,e):a.g.gain.exponentialRampToValueAtTime(r,e)}}else{var u=t,s=1-t,c=u+(g-1)*s;m.exit.gain.value=1/c;for(var l=0;l<m.unison;l++){var f=m.oscillators[l];l===(g-1)/2?f.g.gain.exponentialRampToValueAtTime(u,e):f.g.gain.exponentialRampToValueAtTime(s,e)}}},setTargetAtTime:function(t,e,n){if(t=As(t,0,1,"blend"),m.unison%2==0){var r=t,i=1-t,o=2*r+(g-2)*i;m.exit.gain.setTargetAtTime(1/o,e,n);for(var a=0;a<m.unison;a++){var u=m.oscillators[a];a===g/2-1||a===g/2||2===g?u.g.gain.setTargetAtTime(r,e,n):u.g.gain.setTargetAtTime(i,e,n)}}else{var s=t,c=1-t,l=s+(g-1)*c;m.exit.gain.linearRampToValueAtTime(1/l,e,n);for(var f=0;f<m.unison;f++){var h=m.oscillators[f];f===(g-1)/2?h.g.gain.setTargetAtTime(s,e,n):h.g.gain.setTargetAtTime(c,e,n)}}},setValueCurveAtTime:function(t,e,n){for(var r=0;r<t.length;r++)t[r]=As(t[r],0,1,"blend");for(var i=new Float32Array(t.length),o=i.slice(),a=i.slice(),u=0;u<t.length;u++){var s=u;if(m.unison%2==0)var c=2*(l=s)+(g-2)*(f=1-s);else{var l,f;c=(l=s)+(g-1)*(f=1-s)}i[u]=l,o[u]=f,a[u]=1/c}if(m.unison%2==0)for(var h=0;h<m.unison;h++){var v=m.oscillators[h];h===g/2-1||h===g/2||2===g?v.g.gain.setValueCurveAtTime(i,e,n):v.g.gain.setValueCurveAtTime(o,e,n)}else for(var p=0;p<m.unison;p++){var d=m.oscillators[p];p===(g-1)/2?d.g.gain.setValueCurveAtTime(i,e,n):d.g.gain.setValueCurveAtTime(o,e,n)}y.exit.gain.setValueCurveAtTime(a,e,n)},cancelScheduledValues:function(){for(var t=0;t<y.unison;t++)y.oscillators[t].g.gain.cancelScheduledValues()}},Object.defineProperties(y.blend,{minValue:{value:0,writable:!1},maxValue:{value:1,writable:!1},defaultValue:{value:.5,writable:!1}}),delete y._frequency,delete y._detune,delete y._blend,y}return Zu(f,vs),$u(f,[{key:"connect",value:function(t){this.exit.connect(t)}},{key:"start",value:function(){for(var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this._context.currentTime,e=0;e<this.oscillators.length;e++){this.oscillators[e].o.start(t)}}},{key:"stop",value:function(){for(var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this._context.currentTime,e=0;e<this.oscillators.length;e++){this.oscillators[e].o.stop(t)}}},{key:"unison",get:function(){return this._unison_obj.value}},{key:"type",get:function(){return this._type},set:function(t){this._type=t;for(var e=0;e<this.unison;e++)this.oscillators[e].o.type=t}}],[{key:"numberOfInputs",get:function(){return 0}},{key:"numberOfOutputs",get:function(){return 1}},{key:"context",get:function(){return this._context}}]),f}(),yc=new bs([0,0],[.01,1]),gc=new bs(yc.p2,[1,.2],.4),mc=new Ss([yc,gc]),wc=function(t){function f(t,e,n,r,i,o){Ju(this,f);var a=Qu(this,(f.__proto__||Object.getPrototypeOf(f)).call(this,t));if(1===t.params.unison)var u=h.Context.createOscillator();else u=new dc(t.params);var s=a.gain,c=h.Context.createGain(),l=a.pan;return es([u,s,c,l,t.entryNode]),u.type=t.waveform,u.frequency.setValueAtTime(e,0),s.gain.setValueAtTime(0,0),c.gain.setValueAtTime(i,0),l.pan.setValueAtTime(o,0),u.start(n),t.params.attack_envelope.apply(s.gain,ms.absoluteOffset(n)),s.gain.cancelScheduledValues(r),t.createReleaseEnvelope(t.params.attack_envelope.valueAt(r-n)).apply(s.gain,ms.absoluteOffset(r)),a.node=u,a.vel=c,a.end=r,window.setTimeout(function(){a._destroy()},1e3*(r-h.Context.currentTime+t.params.release_length)+1e3),a}return Zu(f,cc),$u(f,[{key:"_release",value:function(){var t=this,e=h.Context.currentTime;if(!(e>this.end)){var n=this.gain;n.gain.cancelScheduledValues(0),this.parent.createReleaseEnvelope(n.gain.value).apply(this.gain.gain,ms.absoluteOffset(e)),window.setTimeout(function(){t._destroy()},1e3*this.parent.params.release_length+500)}}},{key:"_disconnect",value:function(){var t=this;this.node.stop(),setTimeout(function(){t.pan.disconnect()},100)}},{key:"_cancel",value:function(){this._disconnect()}},{key:"_destroy",value:function(){this._disconnect()}}]),f}(),bc=function(t){function r(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};Ju(this,r);var e=Qu(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,t));e.params={},e.params.unison=t.unison||8,e.params.detune=0===t.detune?0:t.detune||20,e.params.blend=0===t.blend?0:t.blend||.6,e.params.release_length=0===t.release_length?0:t.release_length||.1,e.params.attack_envelope=t.attack_envelope||mc,e.params.waveform=t.waveform||"square",e.oscillators={};for(var n=0;n<128;n++)e.oscillators[n]=null;return e.createReleaseEnvelope=function(t){return new Ss([new bs([0,t],[e.params.release_length,0])])},e}return Zu(r,fc),$u(r,[{key:"createNode",value:function(t,e,n,r,i){return new(Function.prototype.bind.apply(wc,[null].concat([this],Array.prototype.slice.call(arguments))))}},{key:"oscillatorApply",value:function(e){this.iterateOverNodes(function(t){return e(t.node.node)})}},{key:"detune",set:function(e){this.params.detune=e,this.oscillatorApply(function(t){t.detune.value=e})},get:function(){return this.params.detune}},{key:"blend",set:function(e){this.params.blend=e,this.oscillatorApply(function(t){t.blend.value=e})},get:function(){return this.params.blend}},{key:"waveform",set:function(e){this.params.waveform=e,this.oscillatorApply(function(t){t.type=e})},get:function(){return this.params.waveform}}]),r}();function _c(t){for(var e=(t=t.trim().replace(/\s/g,"")).length;0<e;e--){var n=t.slice(0,e);if(n.includes(".")){var r=parseFloat(n);if(!isNaN(r))return new nc({cents:r})}else if(n.includes("/")){var i=n.split("/");if(2===i.length){var o=parseInt(i[0]),a=parseInt(i[1]);if(!isNaN(o)&&!isNaN(a)&&0<o&&0<a)return new nc(o/a)}}else{var u=parseInt(n);if(!isNaN(u))return new nc(u)}}throw console.log(t),new Error("parseSclExpression: Invalid expression "+t)}function xc(t){return kc(t).scale}function kc(t){for(var e=t.split("\n"),n=null,r=null,i=0,o=[],a=0;a<e.length;a++)if("!"!==e[a][0])if(null===n)n=e[a];else if(null===r)try{r=parseInt(e[a])}catch(t){throw new Error("sclFileToScale: second non-comment line of file should be number of notes in scale")}else if(null!==r&&(o.push(_c(e[a])),r<=(i+=1)))break;if(o.length!==r)throw new Error("sclFileToScale: scale size and given scale do not match in size");return{desc:n,scale:o}}var Sc=function(){function n(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};Ju(this,n);var i=this;e.domElement=e.domElement||null,e.allowMultiple=void 0===e.allowMultiple||e.allowMultiple,e.requireExtension=void 0===e.requireExtension||e.requireExtension,e.onerror=e.onerror||function(){return null},this.params=e,this.giveScalaFile=t,this.onchange=function(){var r=this.files;!i.params.allowMultiple&&1<r.length&&i.params.onerror(new Error("Only one file allowed."));for(var t=function(t){var e=r[t];e||i.params.onerror(new Error("No file selected.")),i.params.requireExtension&&!e.name.endsWith(".scl")&&i.params.onerror(new Error("Invalid file extension."));var n=new FileReader;n.addEventListener("loadend",function(){i.giveScalaFile(n.result,e.name)}),n.readAsText(e)},e=0;e<r.length;e++)t(e)},e.domElement&&this.addTo(e.domElement)}return $u(n,[{key:"addTo",value:function(t){this.domElement||(t.addEventListener("change",this.onchange),this.domElement=t)}},{key:"remove",value:function(){this.domElement.removeEventListener("change",this.onchange)}}]),n}(),Tc={ET12:[{cents:100},{cents:200},{cents:300},{cents:400},{cents:500},{cents:600},{cents:700},{cents:800},{cents:900},{cents:1e3},{cents:1100},2]};for(var Ac in Tc)for(var Ec=Tc[Ac],Mc=0;Mc<Ec.length;Mc++)Ec[Mc]=new nc(Ec[Mc]);var Oc=function(){function e(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};if(Ju(this,e),t instanceof e)this.params=t.params;else{if(this.pitch=void 0!==t.pitch?t.pitch:Ks.A4,this.start=void 0===t.start?0:t.start,t.end?this.duration=t.end-this.start:this.duration=void 0===t.duration?1:t.duration,this.pan=void 0===t.pan?0:t.pan,this.vel=void 0===t.vel?1:t.vel,this.start<0)throw new Error("Invalid start time");if(this.duration<=0)throw new Error("Invalid duration")}}return $u(e,[{key:"translate",value:function(t){return new e({pitch:this.pitch,start:this.start+t,duration:this.duration,pan:this.pan,vel:this.vel})}},{key:"end",get:function(){return this.start+this.duration},set:function(t){if(t<=this.start)throw new Error("Invalid end time");this.duration=t-this.start}}]),e}(),Pc=function(t){function e(){return Ju(this,e),Qu(this,(e.__proto__||Object.getPrototypeOf(e)).call(this))}return Zu(e,hs),e}();var Fc=function(t){function n(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};Ju(this,n);var e=Qu(this,(n.__proto__||Object.getPrototypeOf(n)).call(this));return e.dry_node=h.Context.createGain(),e.wet_node=h.Context.createGain(),e.convolver_node=h.Context.createConvolver(),e.entry.connect(e.dry_node),e.entry.connect(e.wet_node),e.dry_node.connect(e.exit),e.wet_node.connect(e.convolver_node),e.convolver_node.connect(e.exit),e.dry_node.gain.value=void 0!==t.dry?t.dry:.5,e.wet_node.gain.value=void 0!==t.wet?t.wet:.5,e.convolver_node.buffer=function(t,e){for(var n=new Float32Array(t),r=n.slice(),i=0;i<t;i++)n[i]=(2*Math.random()-1)*Math.pow(1-i/t,e),r[i]=(2*Math.random()-1)*Math.pow(1-i/t,e);var o=h.Context.createBuffer(2,t,h.Context.sampleRate);return o.getChannelData(0).set(n),o.getChannelData(1).set(r),o}(1e5,3),e}return Zu(n,Pc),$u(n,[{key:"wet",get:function(){return this.wet_node.gain}},{key:"dry",get:function(){return this.dry_node.gain}}]),n}(),Nc=function(){function r(t,e){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:4;Ju(this,r),this.bpm=t,this.offset=e,this.beat_meaning=n}return $u(r,[{key:"ctxTimeToBeat",value:function(t){return(t-this.offset)/60*this.bpm/this.beat_meaning}},{key:"beatToCtxTime",value:function(t){return t/this.bpm*this.beat_meaning*60+this.offset}},{key:"ctxDeltaToBeat",value:function(t){return t/60*this.bpm/this.beat_meaning}},{key:"beatDeltaToCtx",value:function(t){return 60*t/this.bpm*this.beat_meaning}},{key:"parseLength",value:function(t){return this.beatToCtxTime(function(t){if(Es(t))return t}(t))}},{key:"currentBeat",value:function(){return this.ctxTimeToBeat(h.Context.currentTime)}}]),r}();var Ic=function(){function e(t){Ju(this,e),t instanceof Bs||!(t instanceof Object)?this.pitch=new Bs(t):this.pitch=new Bs(void 0!==t.pitch?t.pitch:69),this.start=void 0!==t.start?t.start:0,t.end?this.duration=t.end-this.start:this.duration=void 0===t.duration?1:t.duration,this.vel=void 0!==t.vel?t.vel:1,this.pan=void 0!==t.pan?t.pan:0}return $u(e,[{key:"translate",value:function(t){return this.start+=t,this}},{key:"tr",value:function(t){return this.translate(t)}},{key:"transpose",value:function(t){return this.pitch.value+=t,this}},{key:"tp",value:function(t){return this.transpose(t)}},{key:"amplify",value:function(t){return this.vel*=t,this}},{key:"amp",value:function(t){return this.amplify(t)}},{key:"quieten",value:function(t){return this.amplify(1/t)}},{key:"quiet",value:function(t){return this.quieten(t)}},{key:"clone",value:function(){return new e({pitch:this.pitch,duration:this.duration,start:this.start,vel:this.vel,pan:this.pan})}},{key:"keyboardNote",value:function(t){return new Oc({start:t.beatToCtxTime(this.start),end:t.beatToCtxTime(this.end),vel:this.vel,pan:this.pan,pitch:this.pitch})}},{key:"end",get:function(){return this.duration+this.start}}]),e}();var jc=regeneratorRuntime.mark(Wc),Cc=function(){function o(t){Ju(this,o),Array.isArray(t)?this.notes=t:this.notes=[t];for(var e=0;e<this.notes.length;e++)this.notes[e]instanceof Ic||(this.notes[e]=new Ic(this.notes[e]));this.fix(),this.sort()}return $u(o,[{key:"sort",value:function(){this.notes.sort(function(t,e){return t.start<e.start})}},{key:"apply",value:function(t){for(var e=0;e<this.notes.length;e++)t(this.notes[e])}},{key:"addNote",value:function(t){t instanceof Ic?this.notes.push(t):this.notes.push(new Ic(t)),this.fix(),this.sort()}},{key:"addNotes",value:function(t){for(var e=0;e<t.length;e++){var n=t[e];n instanceof Ic?this.notes.push(n):this.notes.push(new Ic(n))}this.fix(),this.sort()}},{key:"addGroup",value:function(t){this.notes=function(t,e){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:Rc.trim(),r=t.notes.concat(e.notes);return new Cc(Lc(r,n))}(this,t).notes}},{key:"removeNote",value:function(t){if(t instanceof Ic){for(var e=0;e<this.notes.length;e++)if(this.notes[e]===t)return void this.notes.splice(e,1)}else if(t instanceof Function)for(var n=0;n<this.notes.length;n++)if(t(this.notes[n]))return void this.notes.splice(n,1)}},{key:"translate",value:function(e){return this.apply(function(t){return t.translate(e)}),this}},{key:"tr",value:function(t){return this.translate(t)}},{key:"transpose",value:function(e){return this.apply(function(t){return t.transpose(e)}),this}},{key:"tp",value:function(t){return this.transpose(t)}},{key:"amplify",value:function(e){return this.apply(function(t){return t.amplify(e)}),this}},{key:"amp",value:function(t){return this.amplify(t)}},{key:"quieten",value:function(e){return this.apply(function(t){return t.quieten(e)}),this}},{key:"quiet",value:function(e){return this.apply(function(t){return t.quiet(e)})}},{key:"getNotes",value:function(){for(var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:-1/0,e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1/0,n=[],r=0;r<this.notes.length;r++){var i=this.notes[r];i.start>t&&i.start<e&&n.push(i)}return new o(n)}},{key:"fix",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:Rc.trim();this.notes=Lc(this.notes,t)}},{key:"minStart",value:function(){for(var t=-1/0,e=0;e<this.notes.length;e++)this.notes[e].start<t&&(t=this.notes[e].start)}},{key:"maxStart",value:function(){for(var t=-1/0,e=0;e<this.notes.length;e++)this.notes[e].start>t&&(t=this.notes[e].start)}},{key:"minEnd",value:function(){for(var t=-1/0,e=0;e<this.notes.length;e++)this.notes[e].end<t&&(t=this.notes[e].end)}},{key:"maxEnd",value:function(){for(var t=-1/0,e=0;e<this.notes.length;e++)this.notes[e].end>t&&(t=this.notes[e].end)}},{key:"schedule",value:function(t,e){for(var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},r=void 0!==n.minX?n.minX:void 0!==n.minTime?e.ctxTimeToBeat(n.minTime):-1/0,i=void 0!==n.maxX?n.maxX:void 0!==n.maxTime?e.ctxTimeToBeat(n.maxTime):1/0,o=this.getNotes(r,i).notes,a=0;a<o.length;a++)t.schedule(o[a].keyboardNote(e))}}]),o}(),Vc={sum:function(t,e){return new Ic({pitch:t.pitch,vel:t.vel+e.vel,end:Math.max(t.end,e.end),pan:(t.pan+e.pan)/2,start:t.start})},remove:function(t,e){},longer:function(t,e){return e.end>t.end?e:t},shorter:function(t,e){return e.end>t.end?t:e},max_properties:function(t,e){return new Ic({pitch:t.pitch,vel:Math.max(t.vel,e.vel),end:Math.max(t.end,e.end),pan:(t.pan+e.pan)/2,start:t.start})}},Rc={merge:function(){var n=0<arguments.length&&void 0!==arguments[0]?arguments[0]:Vc.sum;return function(t,e){return t.start===e.start?n(t,e):t.start<e.start?new Ic({pitch:t.pitch,vel:t.vel,end:e.end,pan:t.pan,start:t.start}):new Ic({pitch:e.pitch,vel:e.vel,end:t.end,pan:e.pan,start:e.start})}},trim:function(){var n=0<arguments.length&&void 0!==arguments[0]?arguments[0]:Vc.sum;return function(t,e){return t.start===e.start?n(t,e):t.start<e.start?[new Ic({pitch:t.pitch,vel:t.vel,end:e.start,pan:t.pan,start:t.start}),e]:[new Ic({pitch:e.pitch,vel:e.vel,end:t.start,pan:e.pan,start:e.start}),t]}},remove:function(){var n=0<arguments.length&&void 0!==arguments[0]?arguments[0]:Vc.sum;return function(t,e){if(t.start===e.start)return n(t,e)}},first:function(){var n=0<arguments.length&&void 0!==arguments[0]?arguments[0]:Vc.sum;return function(t,e){return t.start===e.start?n(t,e):t.start<e.start?t:e}},second:function(){var n=0<arguments.length&&void 0!==arguments[0]?arguments[0]:Vc.sum;return function(t,e){return t.start===e.start?n(t,e):t.start>e.start?t:e}}};function Lc(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:Rc.trim(),n=!1;do{n=!1;for(var r=t.length,i=0;i<r;i++)for(var o=t[i],a=i+1;a<r;a++){var u=t[a];if(o.pitch.value===u.pitch.value&&(u.start<o.start&&o.start<u.end||o.start<u.start&&u.start<o.end)){var s=e(o,u);if(Array.isArray(s))for(var c=0;c<s.length;c++)t.push(s[c]),r++;else s&&(t.push(s),r++);t.splice(a,1),t.splice(i,1),i--,a--,r-=2,n=!0;break}}}while(n);return t}function Dc(t){for(var e=0;e<t.length;e++)if("#"===t[e])return t.slice(0,e);return t}var Gc=function(t){function n(t){Ju(this,n);var e=Qu(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,t));return e.isRest=!0,e}return Zu(n,Ic),n}(),qc={d1:1,whole:1,w:1,d2:.5,half:.5,h:.5,d4:.25,q:.25,quarter:.25,d8:.125,eighth:.125,e:.125,d16:1/16,sixteenth:1/16,s:1/16,d32:1/32,tt:1/32,d64:1/64,sf:1/64,d128:1/128,d256:1/256,d512:1/512},Uc=!1;function Xc(t,e){var n=e[1];switch(e[0]){case"d":case"dur":case"duration":if(n<=0&&!t.isRest)throw new Error("Duration length "+n+" is invalid");t.duration=n;break;case"s":case"start":t.start=n;break;case"e":case"end":if(t.duration=n-t.start,t.duration<=0&&!t.isRest)throw new Error("End value "+n+" is invalid");break;case"s_off":case"s_offset":case"start_offset":t.start+=n;break;case"d_off":case"d_offset":case"duration_offset":case"dur_offset":if(t.duration+=n,t.duration<=0)throw new Error("Duration offset value "+n+" makes a duration of "+t.duration);break;case"v":case"vel":case"velocity":if(n<=0)throw new Error("Velocity value "+n+" is invalid");t.vel=n;break;case"p":case"pan":if(pan<-1||1<pan)throw new Error("Pan value "+n+" is invalid");t.pan=n}}function Bc(t,e){if(e){var n=e.split(",").map(function(t){var e=t.split(":");if(2!==e.length)throw new Error("Invalid key value pair "+t);return e});n=function(e){Uc||(Uc=!0,console.warn("evalExpression uses eval(), which is dangerous and therefore should only be used for testing purposes."));try{return new Function("ENV","exprs","let _=[];with(ENV){for(let i=0;i<exprs.length;i++){_.push([exprs[i][0],eval(exprs[i][1])])}}return _")(qc,e)}catch(t){throw new Error("Invalid expression "+e)}}(n);for(var r=0;r<t.length;r++)for(var i=t[r],o=0;o<n.length;o++)Xc(i,n[o])}}function Wc(e){var n,r,i,o,a,u,s,c,l,f,h,v;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:n=[],r=function(){return n.includes("{")},i=function(){if(0===n.length)throw new Error("Unbalanced parentheses, brackets, and/or curly braces");return n[n.length-1]},o=function(){if(0===n.length)throw new Error("Unbalanced parentheses, brackets, and/or curly braces");return n.splice(n.length-1,1)},a=function(){return!n.length},u=-1,s="",c=0;case 10:if(!(c<e.length)){t.next=88;break}l=null,t.t0=e[c],t.next="["===t.t0?15:"]"===t.t0?20:"("===t.t0?27:")"===t.t0?30:"{"===t.t0?37:"}"===t.t0?42:"R"===t.t0?49:51;break;case 15:if(!r()){t.next=17;break}throw new Error("Cannot have bracket in properties");case 17:return a()&&(u=c+1),n.push("["),t.abrupt("break",71);case 20:if("["!==i()){t.next=24;break}o(),t.next=25;break;case 24:throw new Error("Mismatched bracket");case 25:return a()&&(l={type:"bracket",value:e.slice(u,c)}),t.abrupt("break",71);case 27:return a()&&(u=c+1),n.push("("),t.abrupt("break",71);case 30:if("("!==i()){t.next=34;break}o(),t.next=35;break;case 34:throw new Error("Mismatched parentheses");case 35:return a()&&(l={type:"paren",value:e.slice(u,c)}),t.abrupt("break",71);case 37:if(!r()){t.next=39;break}throw new Error("Cannot have nested curly braces");case 39:return a()&&(u=c+1),n.push("{"),t.abrupt("break",71);case 42:if("{"!==i()){t.next=46;break}o(),t.next=47;break;case 46:throw new Error("Mismatched curly braces");case 47:return a()&&(l={type:"curly",value:e.slice(u,c)}),t.abrupt("break",71);case 49:return a()&&(l={type:"rest",value:"R"}),t.abrupt("break",71);case 51:if(!a()){t.next=70;break}f=s,s+=e[c],t.prev=54,new Bs(s),t.next=68;break;case 58:return t.prev=58,t.t1=t.catch(54),t.prev=60,t.next=63,{type:"pitch",value:new Bs(f)};case 63:s=e[c],t.next=68;break;case 66:t.prev=66,t.t2=t.catch(60);case 68:t.next=71;break;case 70:return t.abrupt("continue",85);case 71:if(!l){t.next=85;break}if(!s){t.next=83;break}return t.prev=73,h=new Bs(s),t.next=77,{type:"pitch",value:h};case 77:s="",t.next=83;break;case 80:throw t.prev=80,t.t3=t.catch(73),new Error('Invalid pitch "'+s+'"');case 83:return t.next=85,l;case 85:c++,t.next=10;break;case 88:if(!s){t.next=98;break}return t.prev=89,v=new Bs(s),t.next=93,{type:"pitch",value:v};case 93:t.next=98;break;case 95:throw t.prev=95,t.t4=t.catch(89),new Error('Invalid pitch "'+s+'"');case 98:case"end":return t.stop()}},jc,this,[[54,58],[60,66],[73,80],[89,95]])}h.Instrument=ps,h.masterEntryNode=ns,h.masterGainNode=rs,h.masterAnalyzerNode=is,h.setMasterGain=us,h.masterMute=function(){ss=rs.gain,us(0)},h.masterUnmute=function(){us(ss)},h.chainNodes=es,h.contextTime=function(){return h.Context.currentTime},h.setTimeout=ls,h.setTimeoutAbsolute=fs,h.voidNode=os,h.ContextTimeout=cs,h.removeNodesTimeout=function(e,t){return ls(function(){for(var t=0;t<e.length;t++)e[t].disconnect()},t)},h.Envelope=Ss,h.EnvelopeControlPoint=ds,h.EnvelopeVertical=ys,h.EnvelopeHorizontal=ms,h.LinearEnvelopeSegment=bs,h.QuadraticEnvelopeSegment=ks,h.ExponentialEnvelopeSegment=xs,h.applySegmentsToParameter=Ts,h.EnvelopeVerticalInverse=gs,h.noteToName=Fs,h.nameToNote=js,h.KeyboardPitch=Bs,h.KeyboardInterval=Ws,h.KeyboardIntervals=qs,h.KeyboardPitches=Ks,h.makeKeyboardPitch=function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];return new(Function.prototype.bind.apply(Bs,[null].concat(e)))},h.makeKeyboardInterval=function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];return new(Function.prototype.bind.apply(Ws,[null].concat(e)))},h.intervalToName=Gs,h.KeyboardMapping=Js,h.getDefaultKeyboardDict=Qs,h.SimpleInstrument=bc,h.UnisonOscillator=dc,h.Pitch=tc,h.Interval=nc,h.makePitch=function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];return new(Function.prototype.bind.apply(tc,[null].concat(e)))},h.makeInterval=function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];return new(Function.prototype.bind.apply(nc,[null].concat(e)))},h.TwelveTETIntervals={unison:1,minor_second:{cents:100},semitone:{cents:100},major_second:{cents:200},tone:{cents:200},whole_tone:{cents:200},minor_third:{cents:300},major_third:{cents:400},perfect_fourth:{cents:500},tritone:{cents:600},perfect_fifth:{cents:700},minor_sixth:{cents:800},major_sixth:{cents:900},minor_seventh:{cents:1e3},major_seventh:{cents:1100},octave:2},h.PitchMapping=ic,h.PitchMappings=uc,h.pitchMappingFromScale=sc,h.sclFileToScale=xc,h.parseSclExpression=_c,h.sclFileToPitchMapping=function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:Ks.C4,n=arguments[2];return n=n||new tc(e.twelveTETFrequency()),sc(xc(t),e,n)},h.ScalaReader=Sc,h.parseSclFile=kc,h.Scales=Tc,h.KeyboardNote=Oc,h.PitchedInstrument=lc,h.PitchedInstrumentNode=cc,h.Reverb=Fc,h.Filter=Pc,h.Note=Ic,h.makeNote=function(t){return new Ic(t)},h.NoteGroup=Cc,h.parseAbbreviatedGroup=function(t){if(!("string"==typeof(e=t)||e instanceof String))throw new Error("Parse group must act on a string");for(var e,n=t.split("\n"),r=0;r<n.length;r++)n[r]=Dc(n[r]).replace(/\s/g,"");return t=n.join(""),new Cc(function t(e,n){var r=2<arguments.length&&void 0!==arguments[2]&&arguments[2],i=3<arguments.length&&void 0!==arguments[3]?arguments[3]:0;(n=n||new Ic({start:-.25,duration:.25,pan:0,vel:1}))._depth=i,n.end;var o=Wc(e),a=null,u=[],s=[];function c(){!r&&0<s.length&&(n=s[s.length-1]);for(var t=0;t<s.length;t++)s[t].isRest||u.push(s[t]);s=[]}for(;!(a=o.next()).done;){var l=a.value,f=l.value;switch(l.type){case"pitch":c();var h=new Ic({pan:n.pan,vel:n.vel,duration:n.duration,start:n.end,pitch:f});h._depth=i,s=[h];break;case"curly":Bc(s,f),c();break;case"bracket":c(),s=t(f,n,!0,i+1);break;case"paren":c(),s=t(f,n,!1,i+1);break;case"rest":c();var v=new Gc({pan:n.pan,vel:n.vel,duration:n.duration,start:n.end,pitch:n.pitch});s=[v]}}return c(),u}(t))},h.TimeContext=Nc,Object.defineProperty(h,"__esModule",{value:!0})});
    </script>
    
    <script>
        let lowpass_filter = TONES.Context.createBiquadFilter();

lowpass_filter.type = "lowpass";
lowpass_filter.frequency.setValueAtTime(2048, 0);

let instrument = new TONES.SimpleInstrument({
    unison: 8,
    detune: 20,
    blend: 0.5,
    waveform: "square"
});

instrument.connect(lowpass_filter);
instrument.enableKeyboardPlay();

let reverb = new TONES.Reverb();

lowpass_filter.connect(reverb.entry);
reverb.connect(TONES.masterEntryNode);

let tParams = {
    scale: TONES.Scales.ET12,
    baseNote: TONES.KeyboardPitches.A4,
    baseFrequency: 440,
    unison: 8,
    detune: 20,
    blend: 0.5,
    waveform: "square",
    attack: 0.01,
    decay: 1,
    sustain: 0.2,
    release: 0.1
};

function refreshInst() {
    let keyboardPlay = instrument.keyboardPlayEnabled;

    instrument.params.unison = tParams.unison;
    instrument.detune = tParams.detune;
    instrument.blend = tParams.blend;
    instrument.waveform = tParams.waveform;

    instrument.pitch_mapping = TONES.pitchMappingFromScale(tParams.scale, tParams.baseNote, tParams.baseFrequency);

    let a = new TONES.LinearEnvelopeSegment([0,0], [tParams.attack,1]);
    let b = new TONES.LinearEnvelopeSegment(a.p2, [tParams.decay + tParams.attack, tParams.sustain]);
    let attack_env = new TONES.Envelope([a,b]);

    instrument.params.attack_envelope = attack_env;
    instrument.params.release_length = tParams.release;
}

let baseNoteInput = document.getElementById("base_note_input");
let baseFrequencyInput = document.getElementById("base_frequency_input");
let unisonInput = document.getElementById("unison_input");
let detuneInput = document.getElementById("detune_input");
let blendInput = document.getElementById("blend_input");

document.getElementById("sine").onclick = function() {
    tParams.waveform = "sine";
    refreshInst();
};

document.getElementById("square").onclick = function() {
    tParams.waveform = "square";
    refreshInst();
};

document.getElementById("sawtooth").onclick = function() {
    tParams.waveform = "sawtooth";
    refreshInst();
};

document.getElementById("triangle").onclick = function() {
    tParams.waveform = "triangle";
    refreshInst();
};

baseNoteInput.oninput = function(evt) {
    let value = this.value;
    try {

        tParams.baseNote = TONES.makeKeyboardPitch(value);

        baseFrequencyInput.value = tParams.baseNote.twelveTETFrequency().toFixed(5);
        tParams.baseFrequency = tParams.baseNote.twelveTETFrequency();

        refreshInst();
        this.style.backgroundColor = "#FFFFFF";

    } catch (e) {
        this.style.backgroundColor = "#FA8072";
    }
};

baseFrequencyInput.oninput = function(evt) {
    let value = this.value;

    if (value > 0) {
        tParams.baseFrequency = value;
        refreshInst();
        this.style.backgroundColor = "#FFFFFF";
    } else {
        this.style.backgroundColor = "#FA8072";
    }
};

unisonInput.oninput = function(evt) {
    tParams.unison = parseFloat(this.value);

    refreshInst();
};

detuneInput.oninput = function(evt) {
    tParams.detune = parseFloat(this.value) / 10;
    refreshInst();
};

blendInput.oninput = function(evt) {
    tParams.blend = parseFloat(this.value) / 1000;
    refreshInst();
};

baseFrequencyInput.onblur = baseNoteInput.onblur = unisonInput.onblur = function() {
    instrument.enableKeyboardPlay();
};

baseFrequencyInput.onfocus = baseNoteInput.onfocus = unisonInput.onfocus = function () {
    instrument.disableKeyboardPlay();
};

document.getElementById("lowpass_input").oninput = function() {
    let value = Math.pow(2, this.value / 100);

    lowpass_filter.frequency.value = value;
};

document.getElementById("attack_input").oninput = function() {
    let value = Math.pow(2, this.value / 400) - 1;
    tParams.attack = value;
    refreshInst();
};

document.getElementById("decay_input").oninput = function() {
    let value = Math.pow(2, this.value / 400) - 1;
    tParams.decay = value;
    refreshInst();
};

document.getElementById("sustain_input").oninput = function() {
    let value = this.value / 100;
    tParams.sustain = value;
    refreshInst();
};

document.getElementById("release_input").oninput = function() {
    let value = Math.pow(2, this.value / 400) - 1;
    tParams.release = value;
    refreshInst();
};

document.getElementById("dry_input").oninput = function() {
    let value = this.value / 100;
    reverb.dry.value = value;
};

document.getElementById("wet_input").oninput = function() {
    let value = this.value / 100;
    reverb.wet.value = value;
};

let reader = new TONES.ScalaReader(function(scalaFile) {
    scale = TONES.sclFileToScale(scalaFile);
    tParams.scale = scale;
    refreshInst();
}, {domElement: document.getElementById("scala_file_input")});

let BASS_1 = "(G2{d:e,v:0.5}D3G3){d:1.3*e}R{d:-0.3*e}";
let BASS_2 = "(F2{d:e,v:0.5}C3F3){d:1.3*e}R{d:-0.3*e}";
let BASS_3 = "(Eb2{d:e,v:0.5}Bb2Eb3){d:1.3*e}R{d:-0.3*e}";
let MIDDLE_TUNE = "(A3{d:q,v:0.7}B3D4){d:e}G4R{d:-e}";
let MIDDLE_TUNE_2 = "(A3{d:q,v:0.7}Bb3D4){d:e}G4R{d:-e}";
let MIDDLE_TUNE_3 = "(A3{d:q,v:0.7}C4D4){d:e}G4R{d:-e}";
let HIGH_FOURTH = "[D6G6]{d:e,v:1}R{d:-h}";

let strn = `
${BASS_1}
${MIDDLE_TUNE}
${BASS_1}
${HIGH_FOURTH}
R{d:w}
${BASS_2}
${MIDDLE_TUNE}
${BASS_2}
${HIGH_FOURTH}
R{d:h+q}
D3{d:q,v:0.5}
${BASS_1}
${MIDDLE_TUNE}
${BASS_1}
${HIGH_FOURTH}
R{d:w}
${BASS_2}
${MIDDLE_TUNE}
${BASS_2}
${HIGH_FOURTH}
R{d:w}
${BASS_3}
${MIDDLE_TUNE_2}
${BASS_3}
${HIGH_FOURTH}
R{d:w}
${BASS_2}
${MIDDLE_TUNE_3}
${BASS_2}
${HIGH_FOURTH}
`;

let note_group = TONES.parseAbbreviatedGroup(strn);

function playDDD() {
    instrument.cancelAll();
    let time_context = new TONES.TimeContext(140, TONES.Context.currentTime + 0.3);
    note_group.schedule(instrument, time_context);
}
    </script>
<body>

</body>
</html>
